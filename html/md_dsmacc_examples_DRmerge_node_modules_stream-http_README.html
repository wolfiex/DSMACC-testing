<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DSMACC: stream-http [![Build Status](https://travis-ci.org/jhiesey/stream-http.svg?branch=master)](https://travis-ci.org/jhiesey/stream-http)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DSMACC
   &#160;<span id="projectnumber">2019</span>
   </div>
   <div id="projectbrief">Changes to DSMACC for the thesis of Daniel Ellis</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">stream-http [![Build Status](<a href="https://travis-ci.org/jhiesey/stream-http.svg?branch=master">https://travis-ci.org/jhiesey/stream-http.svg?branch=master</a>)](<a href="https://travis-ci.org/jhiesey/stream-http">https://travis-ci.org/jhiesey/stream-http</a>) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://saucelabs.com/u/stream-http"></a></p>
<p>This module is an implementation of <a class="el" href="classNode.html">Node</a>'s native <code>http</code> module for the browser. It tries to match <a class="el" href="classNode.html">Node</a>'s API and behavior as closely as possible, but some features aren't available, since browsers don't give nearly as much control over requests.</p>
<p>This is heavily inspired by, and intended to replace, <a href="https://github.com/substack/http-browserify">http-browserify</a>.</p>
<h2>What does it do?</h2>
<p>In accordance with its name, <code>stream-http</code> tries to provide data to its caller before the request has completed whenever possible.</p>
<p>Backpressure, allowing the browser to only pull data from the server as fast as it is consumed, is supported in:</p><ul>
<li>Chrome &gt;= 58 (using <code>fetch</code> and <code>WritableStream</code>)</li>
</ul>
<p>The following browsers support true streaming, where only a small amount of the request has to be held in memory at once:</p><ul>
<li>Chrome &gt;= 43 (using the <code>fetch</code> API)</li>
<li>Firefox &gt;= 9 (using <code>moz-chunked-arraybuffer</code> responseType with xhr)</li>
</ul>
<p>All other supported browsers support pseudo-streaming, where the data is available before the request finishes, but the entire response must be held in memory. This works for both text and binary data.</p>
<h3>IE note:</h3>
<p>As of version 3.0.0, IE10 and below are no longer supported. IE11 support will remain for now.</p>
<h2>How do you use it?</h2>
<p>The intent is to have the same API as the client part of the <a href="https://nodejs.org/api/http.html">Node HTTP module</a>. The interfaces are the same wherever practical, although limitations in browsers make an exact clone of the <a class="el" href="classNode.html">Node</a> API impossible.</p>
<p>This module implements <code>http.request</code>, <code>http.get</code>, and most of <code>http.ClientRequest</code> and <code>http.IncomingMessage</code> in addition to <code>http.METHODS</code> and <code>http.STATUS_CODES</code>. See the <a class="el" href="classNode.html">Node</a> docs for how these work.</p>
<h3>Extra features compared to <a class="el" href="classNode.html">Node</a></h3>
<ul>
<li>The <code>message.url</code> property provides access to the final URL after all redirects. This is useful since the browser follows all redirects silently, unlike <a class="el" href="classNode.html">Node</a>. It is available in Chrome 37 and newer, Firefox 32 and newer, and Safari 9 and newer.</li>
<li>The <code>options.withCredentials</code> boolean flag, used to indicate if the browser should send cookies or authentication information with a CORS request. Default false.</li>
</ul>
<p>This module has to make some tradeoffs to support binary data and/or streaming. Generally, the module can make a fairly good decision about which underlying browser features to use, but sometimes it helps to get a little input from the developer.</p>
<ul>
<li>The <code>options.mode</code> field passed into <code>http.request</code> or <code>http.get</code> can take on one of the following values:<ul>
<li>'default' (or any falsy value, including <code>undefined</code>): Try to provide partial data before the request completes, but not at the cost of correctness for binary data or correctness of the 'content-type' response header. This mode will also avoid slower code paths whenever possible, which is particularly useful when making large requests in a browser like Safari that has a weaker JavaScript engine.</li>
<li>'allow-wrong-content-type': Provides partial data in more cases than 'default', but at the expense of causing the 'content-type' response header to be incorrectly reported (as 'text/plain; charset=x-user-defined') in some browsers, notably Safari and Chrome 42 and older. Preserves binary data whenever possible. In some cases the implementation may also be a bit slow. This was the default in versions of this module before 1.5.</li>
<li>'prefer-stream': Provide data before the request completes even if binary data (anything that isn't a single-byte ASCII or UTF8 character) will be corrupted. Of course, this option is only safe for text data. May also cause the 'content-type' response header to be incorrectly reported (as 'text/plain; charset=x-user-defined').</li>
<li>'disable-fetch': Force the use of plain XHR regardless of the browser declaring a fetch capability. Preserves the correctness of binary data and the 'content-type' response header.</li>
<li>'prefer-fast': Deprecated; now a synonym for 'default', which has the same performance characteristics as this mode did in versions before 1.5.</li>
</ul>
</li>
<li><code>options.requestTimeout</code> allows setting a timeout in millisecionds for XHR and fetch (if supported by the browser). This is a limit on how long the entire process takes from beginning to end. Note that this is not the same as the node <code>setTimeout</code> functions, which apply to pauses in data transfer over the underlying socket, or the node <code>timeout</code> option, which applies to opening the connection.</li>
</ul>
<h3>Features missing compared to <a class="el" href="classNode.html">Node</a></h3>
<ul>
<li><code>http.Agent</code> is only a stub</li>
<li>The 'socket', 'connect', 'upgrade', and 'continue' events on <code>http.ClientRequest</code>.</li>
<li>Any operations, including <code>request.setTimeout</code>, that operate directly on the underlying socket.</li>
<li>Any options that are disallowed for security reasons. This includes setting or getting certain headers.</li>
<li><code>message.httpVersion</code></li>
<li><code>message.rawHeaders</code> is modified by the browser, and may not quite match what is sent by the server.</li>
<li><code>message.trailers</code> and <code>message.rawTrailers</code> will remain empty.</li>
<li>Redirects are followed silently by the browser, so it isn't possible to access the 301/302 redirect pages.</li>
<li>The <code>timeout</code> event/option and <code>setTimeout</code> functions, which operate on the underlying socket, are not available. However, see <code>options.requestTimeout</code> above.</li>
</ul>
<h2>Example</h2>
<div class="fragment"><div class="line">http.get(&#39;/bundle.js&#39;, function (res) {</div><div class="line">    var div = document.getElementById(&#39;result&#39;);</div><div class="line">    div.innerHTML += &#39;GET /beep&lt;br&gt;&#39;;</div><div class="line"></div><div class="line">    res.on(&#39;data&#39;, function (buf) {</div><div class="line">        div.innerHTML += buf;</div><div class="line">    });</div><div class="line"></div><div class="line">    res.on(&#39;end&#39;, function () {</div><div class="line">        div.innerHTML += &#39;&lt;br&gt;__END__&#39;;</div><div class="line">    });</div><div class="line">})</div></div><!-- fragment --><h2>Running tests</h2>
<p>There are two sets of tests: the tests that run in <a class="el" href="classNode.html">Node</a> (found in <code>test/node</code>) and the tests that run in the browser (found in <code>test/browser</code>). Normally the browser tests run on <a href="http://saucelabs.com/">Sauce Labs</a>.</p>
<p>Running <code>npm test</code> will run both sets of tests, but in order for the Sauce Labs tests to run you will need to sign up for an account (free for open source projects) and put the credentials in a https://github.com/airtap/airtap/blob/master/doc/airtaprc.md "`.airtaprc` file". You will also need to run a <a href="https://wiki.saucelabs.com/display/DOCS/Sauce+Connect+Proxy">Sauce Connect Proxy</a> with the same credentials.</p>
<p>To run just the <a class="el" href="classNode.html">Node</a> tests, run <code>npm run test-node</code>.</p>
<p>To run the browser tests locally, run <code>npm run test-browser-local</code> and point your browser to the link shown in your terminal.</p>
<h2>License</h2>
<p>MIT. Copyright (C) John Hiesey and other contributors. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
