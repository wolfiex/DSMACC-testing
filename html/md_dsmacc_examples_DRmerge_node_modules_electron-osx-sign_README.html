<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DSMACC: electron-osx-sign [![npm][npm_img]][npm_url] [![Build Status][circleci_img]][circleci_url]</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DSMACC
   &#160;<span id="projectnumber">2019</span>
   </div>
   <div id="projectbrief">Changes to DSMACC for the thesis of Daniel Ellis</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">electron-osx-sign [![npm][npm_img]][npm_url] [![Build Status][circleci_img]][circleci_url] </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Codesign Electron macOS apps</p>
<h2>About</h2>
<p><a href="https://github.com/electron-userland/electron-osx-sign"><code>electron-osx-sign</code></a> minimizes the extra work needed to eventually prepare your apps for shipping, providing the most basic tools and assets. Note that the bare necessities here are sufficient for enabling app sandbox, yet other configurations for network access etc. require additional work.</p>
<p>Check out <a href="https://mintkit.net/electron-userland/electron-osx-sign/guide/"><code>electron-osx-sign</code> guide</a> for suggestions on setting up your environment and workflow for distribution or development.</p>
<p>Please visit our <a href="https://github.com/electron-userland/electron-osx-sign/wiki">wiki</a> for walk-throughs, notes and <a href="https://github.com/electron-userland/electron-osx-sign/wiki/FAQ">frequently asked questions</a> from past projects shipped with <a href="https://github.com/electron-userland/electron-packager"><code>electron-packager</code></a> and <a href="https://github.com/electron-userland/electron-osx-sign"><code>electron-osx-sign</code></a>.</p>
<p>*NB: Since <a href="https://github.com/electron-userland/electron-osx-sign"><code>electron-osx-sign</code></a> injects the entry <code>com.apple.security.application-groups</code> into the entitlements file as part of the pre-signing process, this would reportedly limit app transfer on iTunes Connect (see <a href="https://github.com/electron-userland/electron-osx-sign/issues/150">#150</a>). However, opting out entitlements automation &lsquo;opts['pre-auto-entitlements&rsquo;] === false` may result in worse graphics performance.*</p>
<p><em>The signing procedure implemented in this package is based on what described in https://github.com/atom/electron/blob/master/docs/tutorial/mac-app-store-submission-guide.md "Mac App Store Submission Guide".</em></p>
<h3><a href="https://github.com/electron/electron">Electron</a></h3>
<p>It is worth noting as well that starting from <a href="https://github.com/electron/electron">Electron</a> v1.1.1, a new mechanism was introduced to allow IPC in App Sandbox (see <a href="https://github.com/electron/electron/pull/5601">electron#5601</a>); wish to have full support of legacy Electron versions, please utilize <code>opts.version</code>, which option brings less hassle with making default settings among Electron builds.</p>
<p>We are trying to keep updated to the latest <a href="https://github.com/electron/electron">Electron</a> specs; please <a href="https://github.com/electron-userland/electron-osx-sign/issues/new">file us an issue</a> if having any suggestions or experiencing difficulties code signing your products.</p>
<h3>An <a href="http://openopensource.org/">OPEN Open Source Project</a></h3>
<p>Individuals making significant and valuable contributions are given commit-access to the project to contribute as they see fit. This project is more like an open wiki than a standard guarded open source project.</p>
<h3>Collaborators</h3>
<p>Thanks to <a href="https://github.com/seanchas116">seanchas116</a>, <a href="https://github.com/jasonhinkle">jasonhinkle</a>, and <a href="https://github.com/develar">develar</a> for improving the usability of this project implementation.</p>
<h2>Installation</h2>
<div class="fragment"><div class="line"># For use in npm scripts</div><div class="line">npm install --save electron-osx-sign</div></div><!-- fragment --><div class="fragment"><div class="line"># For use from CLI</div><div class="line">npm install -g electron-osx-sign</div></div><!-- fragment --><p><em>Note: <code>electron-osx-sign</code> is a dependency of <code>electron-packager</code> as of 6.0.0 for signing apps on macOS. However, feel free to install this package globally for more customization beyond specifying identity and entitlements.</em></p>
<h2>Usage</h2>
<h3>electron-osx-sign</h3>
<h4>From the Command Line</h4>
<div class="fragment"><div class="line">electron-osx-sign app [embedded-binary ...] [options ...]</div></div><!-- fragment --><h5>Examples</h5>
<p>Since <code>electron-osx-sign</code> adds the entry <code>com.apple.developer.team-identifier</code> to a temporary copy of the specified entitlements file (with the default option <code>--pre-auto-entitlements</code>) distribution builds can no longer be run directly. To run the app codesigned for distribution locally after codesigning, you may manually add <code>ElectronTeamID</code> in your <code>Info.plist</code> and <code>com.apple.security.application-groups</code> in the entitlements file, and provide the flag <code>--no-pre-auto-entitlements</code> for <code>electron-osx-sign</code> to avoid this extra bit. Note that "certain features are only allowed across apps whose team-identifier value match" (<a href="https://developer.apple.com/library/content/technotes/tn2415/_index.html#//apple_ref/doc/uid/DTS40016427-CH1-ENTITLEMENTSLIST">Technical Note TN2415</a>).</p>
<p>The examples below assume that <code>--pre-auto-entitlements</code> is enabled.</p>
<ul>
<li>To sign a distribution version by default: <div class="fragment"><div class="line">electron-osx-sign path/to/my.app</div></div><!-- fragment --> For distribution in the Mac App Store: Have the provisioning profile for distribution placed in the current working directory and the signing identity installed in the default keychain. <em>The app is not expected to run after codesigning since there is no provisioned device, and it is intended only for submission to iTunes Connect.</em> For distribution outside the Mac App Store: Have the signing identity for distribution installed in the default keychain and optionally place the provisioning profile in the current working directory. By default App Sandbox is not enabled. <em>The app should run on all devices.</em></li>
<li>To sign development version: <div class="fragment"><div class="line">electron-osx-sign path/to/my.app --type=development</div></div><!-- fragment --> For testing Mac App Store builds: Have the provisioning profile for development placed in the current working directory and the signing identity installed in the default keychain. <em>The app will only run on provisioned devices.</em> For testing apps for distribution outside the Mac App Store, have the signing identity for development installed in the default keychain and optionally the provisioning profile placed in the current working directory. <em>The app will only run on provisioned devices.</em> However, you may prefer to just go with signing a distribution version because the app is expected to launch properly after codesigned.</li>
<li>It is recommended to place the provisioning profile(s) under the working directory for <code>electron-osx-sign</code> to pick up automatically; however, to specify provisioning profile to be embedded explicitly: <div class="fragment"><div class="line">electron-osx-sign path/to/my.app --provisioning-profile=path/to/my.provisionprofile</div></div><!-- fragment --></li>
<li>To specify the entitlements file: <div class="fragment"><div class="line">electron-osx-sign path/to/my.app --entitlements=path/to/my.entitlements</div></div><!-- fragment --></li>
<li>It is recommended to make use of <code>--version</code> while signing legacy versions of Electron: <div class="fragment"><div class="line">electron-osx-sign path/to/my.app --version=0.34.0</div></div><!-- fragment --></li>
</ul>
<p>Run <code>electron-osx-sign --help</code> or see <a href="https://github.com/electron-userland/electron-osx-sign/blob/master/bin/electron-osx-sign-usage.txt">electron-osx-sign-usage.txt</a> for CLI-specific options.</p>
<h4>From the API</h4>
<div class="fragment"><div class="line">var sign = require(&#39;electron-osx-sign&#39;)</div><div class="line">sign(opts[, function done (err) {}])</div></div><!-- fragment --><p>Example:</p>
<div class="fragment"><div class="line">var sign = require(&#39;electron-osx-sign&#39;)</div><div class="line">sign({</div><div class="line">  app: &#39;path/to/my.app&#39;</div><div class="line">}, function done (err) {</div><div class="line">  if (err) {</div><div class="line">    // Handle the error</div><div class="line">    return;</div><div class="line">  }</div><div class="line">  // Application signed</div><div class="line">})</div></div><!-- fragment --><p>From release v0.4.0-beta, <a href="https://github.com/petkaantonov/bluebird">Bluebird</a> promises are introduced for better async method calls; the following is also available for use.</p>
<div class="fragment"><div class="line">var signAsync = require(&#39;electron-osx-sign&#39;).signAsync</div><div class="line">signAsync(opts)</div><div class="line">  [.then(function () {})]</div><div class="line">  [.catch(function (err) {})]</div></div><!-- fragment --><p>Example:</p>
<div class="fragment"><div class="line">var signAsync = require(&#39;electron-osx-sign&#39;).signAsync</div><div class="line">signAsync({</div><div class="line">  app: &#39;path/to/my.app&#39;</div><div class="line">})</div><div class="line">  .then(function () {</div><div class="line">    // Application signed</div><div class="line">  })</div><div class="line">  .catch(function (err) {</div><div class="line">    // Handle the error</div><div class="line">  })</div></div><!-- fragment --><h6>opts - Options</h6>
<p><b>Required</b></p>
<p><code>app</code> - <em>String</em></p>
<p>Path to the application package. Needs file extension <code>.app</code>.</p>
<p><b>Optional</b></p>
<p><code>binaries</code> - <em>Array</em></p>
<p>Path to additional binaries that will be signed along with built-ins of Electron. Default to <code>undefined</code>.</p>
<p><code>entitlements</code> - <em>String</em></p>
<p>Path to entitlements file for signing the app. Default to built-in entitlements file, Sandbox enabled for Mac App Store platform. See <a href="https://github.com/electron-userland/electron-osx-sign/blob/master/default.entitlements.mas.plist">default.entitlements.mas.plist</a> or <a href="https://github.com/electron-userland/electron-osx-sign/blob/master/default.entitlements.darwin.plist">default.entitlements.darwin.plist</a> with respect to your platform.</p>
<p><code>entitlements-inherit</code> - <em>String</em></p>
<p>Path to child entitlements which inherit the security settings for signing frameworks and bundles of a distribution. <em>This option only applies when signing with entitlements.</em> See <a href="https://github.com/electron-userland/electron-osx-sign/blob/master/default.entitlements.mas.inherit.plist">default.entitlements.mas.inherit.plist</a> or <a href="https://github.com/electron-userland/electron-osx-sign/blob/master/default.entitlements.darwin.inherit.plist">default.entitlements.darwin.inherit.plist</a> with respect to your platform.</p>
<p><code>gatekeeper-assess</code> - <em>Boolean</em></p>
<p>Flag to enable/disable Gatekeeper assessment after signing the app. Disabling it is useful for signing with self-signed certificates. Gatekeeper assessment is enabled by default on <code>darwin</code> platform. Default to <code>true</code>.</p>
<p><code>hardenedRuntime</code> or <code>hardened-runtime</code> - <em>Boolean</em></p>
<p>Flag to enable the Mojave hardened runtime when signing the app. Disabled by default, requires Xcode &gt;= 10 and macOS &gt;= 10.13.6.</p>
<p><code>identity</code> - <em>String</em></p>
<p>Name of certificate to use when signing. Default to be selected with respect to <code>provisioning-profile</code> and <code>platform</code> from <code>keychain</code> or keychain by system default.</p>
<p>Signing platform <code>mas</code> will look for <code>3rd Party Mac Developer Application: * (*)</code>, and platform <code>darwin</code> will look for <code>Developer ID Application: * (*)</code> by default.</p>
<p><code>identity-validation</code> - <em>Boolean</em></p>
<p>Flag to enable/disable validation for the signing identity. If enabled, the <code>identity</code> provided will be validated in the <code>keychain</code> specified. Default to <code>true</code>.</p>
<p><code>keychain</code> - <em>String</em></p>
<p>The keychain name. Default to system default keychain.</p>
<p><code>ignore</code> - <em>RegExp|Function|Array.&lt;(RegExp|Function)&gt;</em></p>
<p>Regex, function or an array of regex's and functions that signal skipping signing a file. Elements of other types are treated as <code>RegExp</code>. Default to <code>undefined</code>.</p>
<p><code>platform</code> - <em>String</em></p>
<p>Build platform of Electron. Allowed values: <code>darwin</code>, <code>mas</code>. Default to auto detect by presence of <code>Squirrel.framework</code> within the application bundle.</p>
<p><code>pre-auto-entitlements</code> - <em>Boolean</em></p>
<p>Flag to enable/disable automation of <code>com.apple.security.application-groups</code> in entitlements file and update <code>Info.plist</code> with <code>ElectronTeamID</code>. Default to <code>true</code>.</p>
<p><code>pre-embed-provisioning-profile</code> - <em>Boolean</em></p>
<p>Flag to enable/disable embedding of provisioning profile in the current working directory. Default to <code>true</code>.</p>
<p><code>provisioning-profile</code> - <em>String</em></p>
<p>Path to provisioning profile.</p>
<p><code>requirements</code> - <em>String</em></p>
<p>Specify the criteria that you recommend to be used to evaluate the code signature. See more info from <a href="https://developer.apple.com/library/mac/documentation/Security/Conceptual/CodeSigningGuide/RequirementLang/RequirementLang.html">https://developer.apple.com/library/mac/documentation/Security/Conceptual/CodeSigningGuide/RequirementLang/RequirementLang.html</a> Default to <code>undefined</code>.</p>
<p><code>restrict</code> - <em>Boolean</em></p>
<p><b>To be deprecated, see <code>signature-flags</code>.</b> Restrict dyld loading. See doc about this <a href="https://developer.apple.com/documentation/security/seccodesignatureflags/kseccodesignaturerestrict?language=objc">code signature flag</a> for more details. Disabled by default.</p>
<p><code>signature-flags</code> - <em>String</em> Comma separated string or array for <a href="https://developer.apple.com/documentation/security/seccodesignatureflags?language=objc">code signature flag</a>. Default to <code>undefined</code>.</p>
<p><code>strict-verify</code> - <em>Boolean|String|Array.&lt;String&gt;</em></p>
<p>Flag to enable/disable <code>--strict</code> flag when verifying the signed application bundle. If provided as a string, each component should be separated with comma (<code>,</code>). If provided as an array, each item should be a string corresponding to a component. Default to <code>true</code>.</p>
<p><code>timestamp</code> - <em>String</em></p>
<p>Specify the URL of the timestamp authority server, default to server provided by Apple. Please note that this default server may not support signatures not furnished by Apple. Disable the timestamp service with <code>none</code>.</p>
<p><code>type</code> - <em>String</em></p>
<p>Specify whether to sign app for development or for distribution. Allowed values: <code>development</code>, <code>distribution</code>. Default to <code>distribution</code>.</p>
<p><code>version</code> - <em>String</em></p>
<p>Build version of Electron. Values may be like: <code>1.1.1</code>, <code>1.2.0</code>. Default to latest Electron version.</p>
<p>It is recommended to utilize this option for best support of specific Electron versions. This may trigger pre/post operations for signing: For example, automation of setting <code>com.apple.security.application-groups</code> in entitlements file and of updating <code>Info.plist</code> with <code>ElectronTeamID</code> is enabled for all versions starting from <code>1.1.1</code>; set <code>pre-auto-entitlements</code> option to <code>false</code> to disable this feature.</p>
<h6>cb - Callback</h6>
<p><code>err</code> - <em>Error</em></p>
<h3>electron-osx-flat</h3>
<h4>From the Command Line</h4>
<div class="fragment"><div class="line">electron-osx-flat app [options ...]</div></div><!-- fragment --><p>Example:</p>
<div class="fragment"><div class="line">electron-osx-flat path/to/my.app</div></div><!-- fragment --><p>Run <code>electron-osx-flat --help</code> or see <a href="https://github.com/electron-userland/electron-osx-sign/blob/master/bin/electron-osx-flat-usage.txt">electron-osx-flat-usage.txt</a> for CLI-specific options.</p>
<h4>From the API</h4>
<div class="fragment"><div class="line">var flat = require(&#39;electron-osx-sign&#39;).flat</div><div class="line">flat(opts[, function done (err) {}])</div></div><!-- fragment --><p>Example:</p>
<div class="fragment"><div class="line">var flat = require(&#39;electron-osx-sign&#39;).flat</div><div class="line">flat({</div><div class="line">  app: &#39;path/to/my.app&#39;</div><div class="line">}, function done (err) {</div><div class="line">  if (err) {</div><div class="line">    // Handle the error</div><div class="line">    return;</div><div class="line">  }</div><div class="line">  // Application flattened</div><div class="line">})</div></div><!-- fragment --><p>From release v0.4.0-beta, <a href="https://github.com/petkaantonov/bluebird">Bluebird</a> promises are introduced for better async method calls; the following is also available for use.</p>
<div class="fragment"><div class="line">var flatAsync = require(&#39;electron-osx-sign&#39;).flatAsync</div><div class="line">flatAsync(opts)</div><div class="line">  [.then(function () {})]</div><div class="line">  [.catch(function (err) {})]</div></div><!-- fragment --><p>Example:</p>
<div class="fragment"><div class="line">var flatAsync = require(&#39;electron-osx-sign&#39;).flatAsync</div><div class="line">flatAsync({</div><div class="line">  app: &#39;path/to/my.app&#39;</div><div class="line">})</div><div class="line">  .then(function () {</div><div class="line">    // Application flattened</div><div class="line">  })</div><div class="line">  .catch(function (err) {</div><div class="line">    // Handle the error</div><div class="line">  })</div></div><!-- fragment --><h6>opts - Options</h6>
<p><b>Required</b></p>
<p><code>app</code> - <em>String</em></p>
<p>Path to the application bundle. Needs file extension <code>.app</code>.</p>
<p><b>Optional</b></p>
<p><code>identity</code> - <em>String</em></p>
<p>Name of certificate to use when signing. Default to be selected with respect to <code>platform</code> from <code>keychain</code> or keychain by system default.</p>
<p>Flattening platform <code>mas</code> will look for <code>3rd Party Mac Developer Installer: * (*)</code>, and platform <code>darwin</code> will look for <code>Developer ID Installer: * (*)</code> by default.</p>
<p><code>identity-validation</code> - <em>Boolean</em></p>
<p>Flag to enable/disable validation for signing identity. If enabled, the <code>identity</code> provided will be validated in the <code>keychain</code> specified. Default to <code>true</code>.</p>
<p><code>install</code> - <em>String</em></p>
<p>Path to install the bundle. Default to <code>/Applications</code>.</p>
<p><code>keychain</code> - <em>String</em></p>
<p>The keychain name. Default to system default keychain.</p>
<p><code>platform</code> - <em>String</em></p>
<p>Build platform of Electron. Allowed values: <code>darwin</code>, <code>mas</code>. Default to auto detect by presence of <code>Squirrel.framework</code> within the application bundle.</p>
<p><code>pkg</code> - <em>String</em></p>
<p>Path to the output the flattened package. Needs file extension <code>.pkg</code>.</p>
<p><code>scripts</code> - <em>String</em> Path to a directory containing pre and/or post install scripts.</p>
<h6>cb - Callback</h6>
<p><code>err</code> - <em>Error</em></p>
<h2>Debug</h2>
<p>As of release v0.3.1, external module <code>debug</code> is used to display logs and messages; remember to <code>export DEBUG=electron-osx-sign*</code> when necessary.</p>
<h2>Test</h2>
<p>The project's configured to run automated tests on CircleCI.</p>
<p>If you wish to manually test the module, first comment out <code>opts.identity</code> in <code>test/basic.js</code> to enable auto discovery. Then run the command <code>npm test</code> from the dev directory.</p>
<p>When this command is run for the first time: <code>electron-download</code> will download macOS Electron releases defined in <code>test/config.json</code>, and save to <code>~/.electron/</code>, which might take up less than 1GB of disk space.</p>
<p>A successful testing should look something like:</p>
<div class="fragment"><div class="line">$ npm test</div><div class="line"></div><div class="line">&gt; electron-osx-sign@0.4.14 pretest electron-osx-sign</div><div class="line">&gt; rimraf test/work</div><div class="line"></div><div class="line">&gt; electron-osx-sign@0.4.14 test electron-osx-sign</div><div class="line">&gt; standard &amp;&amp; tape test</div><div class="line"></div><div class="line">Calling electron-download before running tests...</div><div class="line">Running tests...</div><div class="line">TAP version 13</div><div class="line"># setup</div><div class="line"># defaults-test:v7.0.0-beta.3-darwin-x64</div><div class="line">ok 1 app signed</div><div class="line"># defaults-test:v7.0.0-beta.3-mas-x64</div><div class="line">ok 2 app signed</div><div class="line"># defaults-test:v6.0.3-darwin-x64</div><div class="line">ok 3 app signed</div><div class="line"># defaults-test:v6.0.3-mas-x64</div><div class="line">ok 4 app signed</div><div class="line"># defaults-test:v5.0.10-darwin-x64</div><div class="line">ok 5 app signed</div><div class="line"># defaults-test:v5.0.10-mas-x64</div><div class="line">ok 6 app signed</div><div class="line"># defaults-test:v4.2.9-darwin-x64</div><div class="line">ok 7 app signed</div><div class="line"># defaults-test:v4.2.9-mas-x64</div><div class="line">ok 8 app signed</div><div class="line"># defaults-test:v3.1.2-darwin-x64</div><div class="line">ok 9 app signed</div><div class="line"># defaults-test:v3.1.2-mas-x64</div><div class="line">ok 10 app signed</div><div class="line"># teardown</div><div class="line"></div><div class="line">1..10</div><div class="line"># tests 10</div><div class="line"># pass  10</div><div class="line"></div><div class="line"># ok</div></div><!-- fragment --><h2>Related</h2>
<ul>
<li><a href="https://github.com/electron-userland/electron-packager">electron-packager</a> - Package your electron app in OS executables (.app, .exe, etc) via JS or CLI</li>
<li><a href="https://github.com/electron-userland/electron-builder">electron-builder</a> - A complete solution to package and build a ready for distribution Electron app with “auto update” support out of the box </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
