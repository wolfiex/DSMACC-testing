<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DSMACC: dsmacc.observations.get_diurnal Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DSMACC
   &#160;<span id="projectnumber">2019</span>
   </div>
   <div id="projectbrief">Changes to DSMACC for the thesis of Daniel Ellis</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>dsmacc</b></li><li class="navelem"><b>observations</b></li><li class="navelem"><a class="el" href="namespacedsmacc_1_1observations_1_1get__diurnal.html">get_diurnal</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">dsmacc.observations.get_diurnal Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a913883661be023e5318fd82cd5d9d73a"><td class="memItemLeft" align="right" valign="top"><a id="a913883661be023e5318fd82cd5d9d73a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>df</b> = pd.DataFrame()</td></tr>
<tr class="separator:a913883661be023e5318fd82cd5d9d73a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d2fdfe2ec018716282a10c28b75929b"><td class="memItemLeft" align="right" valign="top"><a id="a4d2fdfe2ec018716282a10c28b75929b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>f</b> = list(filter(lambda x : x != 'True',sys.argv[1:]))</td></tr>
<tr class="separator:a4d2fdfe2ec018716282a10c28b75929b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac275a4f55671597f5e76ac3c52174d32"><td class="memItemLeft" align="right" valign="top"><a id="ac275a4f55671597f5e76ac3c52174d32"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>inplace</b></td></tr>
<tr class="separator:ac275a4f55671597f5e76ac3c52174d32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef9ba65f80fdf8e9acd289d4a4e5b5c5"><td class="memItemLeft" align="right" valign="top"><a id="aef9ba65f80fdf8e9acd289d4a4e5b5c5"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>dr</b> = '_'.join([i.split('.')[0] for i in f])</td></tr>
<tr class="separator:aef9ba65f80fdf8e9acd289d4a4e5b5c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35f252d52a909ac318ea8b38a2557f70"><td class="memItemLeft" align="right" valign="top"><a id="a35f252d52a909ac318ea8b38a2557f70"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>date</b></td></tr>
<tr class="separator:a35f252d52a909ac318ea8b38a2557f70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2777291e478e3b9699b1d2b6cf10884c"><td class="memItemLeft" align="right" valign="top"><a id="a2777291e478e3b9699b1d2b6cf10884c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>columns</b></td></tr>
<tr class="separator:a2777291e478e3b9699b1d2b6cf10884c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad9c8bdafe36064863015928e3a1eb27"><td class="memItemLeft" align="right" valign="top"><a id="aad9c8bdafe36064863015928e3a1eb27"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>scale</b> = None</td></tr>
<tr class="separator:aad9c8bdafe36064863015928e3a1eb27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a83c10c18852c5bbdc39097290acda3"><td class="memItemLeft" align="right" valign="top"><a id="a4a83c10c18852c5bbdc39097290acda3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>fail</b> = float(item)</td></tr>
<tr class="separator:a4a83c10c18852c5bbdc39097290acda3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e5c6d9ef2f710a54393939de4b81fed"><td class="memItemLeft" align="right" valign="top"><a id="a1e5c6d9ef2f710a54393939de4b81fed"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>df1</b> = df[['HOUR','MONTH',item]].dropna().astype(float)</td></tr>
<tr class="separator:a1e5c6d9ef2f710a54393939de4b81fed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee925ef8db1b9593b772813a5a4d30a7"><td class="memItemLeft" align="right" valign="top"><a id="aee925ef8db1b9593b772813a5a4d30a7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>X</b> = df1['HOUR MONTH'.split()].values</td></tr>
<tr class="separator:aee925ef8db1b9593b772813a5a4d30a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a3fe2c4578c23e9daafc57a7b2bead2"><td class="memItemLeft" align="right" valign="top"><a id="a9a3fe2c4578c23e9daafc57a7b2bead2"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Y</b> = np.log10(df1[item]*scale).values</td></tr>
<tr class="separator:a9a3fe2c4578c23e9daafc57a7b2bead2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e635882309c8af963b3474c770b5dd1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><b>nn</b></td></tr>
<tr class="separator:a2e635882309c8af963b3474c770b5dd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a029cd852e32ae7dd3c9dbcc9d4ba5d28"><td class="memItemLeft" align="right" valign="top"><a id="a029cd852e32ae7dd3c9dbcc9d4ba5d28"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>mname</b> = 'January February March April May June July August September October November December'.split()</td></tr>
<tr class="separator:a029cd852e32ae7dd3c9dbcc9d4ba5d28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cc14a7ec95219828dd99c17d0665a44"><td class="memItemLeft" align="right" valign="top"><a id="a3cc14a7ec95219828dd99c17d0665a44"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>entries</b> = np.array(list(set(df1.MONTH)))*12</td></tr>
<tr class="separator:a3cc14a7ec95219828dd99c17d0665a44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5129c11bfed74eb88568ab75d129d45a"><td class="memItemLeft" align="right" valign="top"><a id="a5129c11bfed74eb88568ab75d129d45a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>fig</b> = plt.figure(figsize=(16.*((max(entries)-min(entries)+1)/12),8))</td></tr>
<tr class="separator:a5129c11bfed74eb88568ab75d129d45a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80ea9ae952f10e1c91eb0ebd9a505faf"><td class="memItemLeft" align="right" valign="top"><a id="a80ea9ae952f10e1c91eb0ebd9a505faf"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>start</b> = min(entries)</td></tr>
<tr class="separator:a80ea9ae952f10e1c91eb0ebd9a505faf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa62c30f744cbf3467cb562c80d91c9b6"><td class="memItemLeft" align="right" valign="top"><a id="aa62c30f744cbf3467cb562c80d91c9b6"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>m</b> = m1/12</td></tr>
<tr class="separator:aa62c30f744cbf3467cb562c80d91c9b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af47f426ceee2f5c2bd7c6ef4ab65923f"><td class="memItemLeft" align="right" valign="top"><a id="af47f426ceee2f5c2bd7c6ef4ab65923f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>s</b> = df1[df1.MONTH==m]</td></tr>
<tr class="separator:af47f426ceee2f5c2bd7c6ef4ab65923f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a730efeee06e030a319864ccd678c0432"><td class="memItemLeft" align="right" valign="top"><a id="a730efeee06e030a319864ccd678c0432"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>values</b></td></tr>
<tr class="separator:a730efeee06e030a319864ccd678c0432"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2b37f1b187826a2774c379076dba528"><td class="memItemLeft" align="right" valign="top"><a id="ab2b37f1b187826a2774c379076dba528"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>alpha</b></td></tr>
<tr class="separator:ab2b37f1b187826a2774c379076dba528"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7de8121ed56bd18b11956333b8492f9e"><td class="memItemLeft" align="right" valign="top"><a id="a7de8121ed56bd18b11956333b8492f9e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>h</b> = np.array(range(24))/24.</td></tr>
<tr class="separator:a7de8121ed56bd18b11956333b8492f9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5d4ce92accff7f16ffbebbb1bb3ec74"><td class="memItemLeft" align="right" valign="top"><a id="aa5d4ce92accff7f16ffbebbb1bb3ec74"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>axis</b></td></tr>
<tr class="separator:aa5d4ce92accff7f16ffbebbb1bb3ec74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cbe408ed25abb2964096a551820b0c9"><td class="memItemLeft" align="right" valign="top"><a id="a1cbe408ed25abb2964096a551820b0c9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>nbins</b></td></tr>
<tr class="separator:a1cbe408ed25abb2964096a551820b0c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dedeff222be24b562028d900f6ff04d"><td class="memItemLeft" align="right" valign="top"><a id="a2dedeff222be24b562028d900f6ff04d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>rect</b></td></tr>
<tr class="separator:a2dedeff222be24b562028d900f6ff04d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd909b567c5889491e96932630002690"><td class="memItemLeft" align="right" valign="top"><a id="afd909b567c5889491e96932630002690"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>w_pad</b></td></tr>
<tr class="separator:afd909b567c5889491e96932630002690"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0bbbfc94b7aaa9bac8c48686056b70e"><td class="memItemLeft" align="right" valign="top"><a id="ab0bbbfc94b7aaa9bac8c48686056b70e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ax</b> = fig.gca()</td></tr>
<tr class="separator:ab0bbbfc94b7aaa9bac8c48686056b70e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2732ed80fc1377f1352c4437a2f64a88"><td class="memItemLeft" align="right" valign="top"><a id="a2732ed80fc1377f1352c4437a2f64a88"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>labels</b> = [re.sub(r'[^\x00-\x7F]+','-',item.get_text()) for item in ax.get_yticklabels()]</td></tr>
<tr class="separator:a2732ed80fc1377f1352c4437a2f64a88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bb476aaf3c7a4fca0d7b22dd6ad6abb"><td class="memItemLeft" align="right" valign="top"><a id="a0bb476aaf3c7a4fca0d7b22dd6ad6abb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>which</b></td></tr>
<tr class="separator:a0bb476aaf3c7a4fca0d7b22dd6ad6abb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80cf8dbff1fdd8f2fb3c62b06a163010"><td class="memItemLeft" align="right" valign="top"><a id="a80cf8dbff1fdd8f2fb3c62b06a163010"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>length</b></td></tr>
<tr class="separator:a80cf8dbff1fdd8f2fb3c62b06a163010"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">This script reads a csv (or excel) file from a field campaign and then applies a feed forward (simple) neural network to generate a mean monthly diurnal for the entirety of the data. 

Input arguments: &lt;Str:filename(s)&gt; &lt;Bool:all columns&gt;

File structure:
 1. Species must contain 'ppbv' or 'pptv' after their names to be considered unless the optional second argument to the script is supplied, and set to 'True'
 2. A 'date' column must be supplied with the format of xxxx/mm/xxxx hh:mm:xx or 
xxxx-mm-xxxx hh:mm:xx, where x is not considered in the parsing. 

Missing/data with gaps works is fine - and is why this program was created!

Requirements:
- sklearn
- pandas
- matplotlib
- xlrd (if using excel)

###############

This script was developed as part of the PhD of Daniel Ellis at the university of York. An aim to make it universal (for all experimental data) has been taken, and it is yet to be tidied. If any tweaks are required feel free to update it and submit a pull request detailing any of the changes made. 

If used please cite the DSMACC repository doi &lt;insert here&gt; to which the script belongs and my thesis itself &lt;insert link here&gt;. 

##############

Author: daniel.ellis@york.ac.uk</pre> </div><h2 class="groupheader">Variable Documentation</h2>
<a id="a2e635882309c8af963b3474c770b5dd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e635882309c8af963b3474c770b5dd1">&#9670;&nbsp;</a></span>nn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dsmacc.observations.get_diurnal.nn</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;=  MLPRegressor(</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        hidden_layer_sizes=(10,),  activation=<span class="stringliteral">&#39;tanh&#39;</span>, solver=<span class="stringliteral">&#39;lbfgs&#39;</span>, alpha=0.001, batch_size=<span class="stringliteral">&#39;auto&#39;</span>,</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        learning_rate=<span class="stringliteral">&#39;adaptive&#39;</span>, learning_rate_init=0.005, power_t=0.5, max_iter=2000, shuffle=<span class="keyword">True</span>,</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        random_state=9, tol=1e-4, verbose=<span class="keyword">False</span> , warm_start=<span class="keyword">False</span>, momentum=0.9, nesterovs_momentum=<span class="keyword">True</span>,</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        early_stopping=<span class="keyword">False</span>, validation_fraction=0.4, beta_1=0.9, beta_2=0.999, epsilon=1e-08)</div></div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
