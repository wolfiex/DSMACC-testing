<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DSMACC: readdirp [![Build Status](https://secure.travis-ci.org/thlorenz/readdirp.svg)](http://travis-ci.org/thlorenz/readdirp)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DSMACC
   &#160;<span id="projectnumber">2019</span>
   </div>
   <div id="projectbrief">Changes to DSMACC for the thesis of Daniel Ellis</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">readdirp [![Build Status](<a href="https://secure.travis-ci.org/thlorenz/readdirp.svg">https://secure.travis-ci.org/thlorenz/readdirp.svg</a>)](<a href="http://travis-ci.org/thlorenz/readdirp">http://travis-ci.org/thlorenz/readdirp</a>) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://nodei.co/npm/readdirp/"></a></p>
<p>Recursive version of <a href="http://nodejs.org/docs/latest/api/fs.html#fs_fs_readdir_path_callback">fs.readdir</a>. Exposes a <b>stream api</b>.</p>
<div class="fragment"><div class="line">var readdirp = require(&#39;readdirp&#39;)</div><div class="line">  , path = require(&#39;path&#39;)</div><div class="line">  , es = require(&#39;event-stream&#39;);</div><div class="line"></div><div class="line">// print out all JavaScript files along with their size</div><div class="line"></div><div class="line">var stream = readdirp({ root: path.join(__dirname), fileFilter: &#39;*.js&#39; });</div><div class="line">stream</div><div class="line">  .on(&#39;warn&#39;, function (err) {</div><div class="line">    console.error(&#39;non-fatal error&#39;, err);</div><div class="line">    // optionally call stream.destroy() here in order to abort and cause &#39;close&#39; to be emitted</div><div class="line">  })</div><div class="line">  .on(&#39;error&#39;, function (err) { console.error(&#39;fatal error&#39;, err); })</div><div class="line">  .pipe(es.mapSync(function (entry) {</div><div class="line">    return { path: entry.path, size: entry.stat.size };</div><div class="line">  }))</div><div class="line">  .pipe(es.stringify())</div><div class="line">  .pipe(process.stdout);</div></div><!-- fragment --><p>Meant to be one of the recursive versions of <a href="http://nodejs.org/docs/latest/api/fs.html">fs</a> functions, e.g., like <a href="https://github.com/substack/node-mkdirp">mkdirp</a>.</p>
<p><b>Table of Contents</b> <em>generated with <a href="http://doctoc.herokuapp.com/">DocToc</a></em></p>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#api">API</a><ul>
<li><a href="#entry-stream">entry stream</a></li>
<li><a href="#options">options</a></li>
<li><a href="#entry-info">entry info</a></li>
<li><a href="#filters">Filters</a></li>
<li><a href="#callback-api">Callback API</a><ul>
<li><a href="#allprocessed">allProcessed</a></li>
<li><a href="#fileprocessed">fileProcessed</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#more-examples">More Examples</a><ul>
<li><a href="#stream-api">stream api</a></li>
<li><a href="#stream-api-pipe">stream api pipe</a></li>
<li><a href="#grep">grep</a></li>
<li><a href="#using-callback-api">using callback api</a></li>
<li><a href="#tests">tests</a></li>
</ul>
</li>
</ul>
<h1>Installation</h1>
<pre class="fragment">npm install readdirp
</pre><h1>API</h1>
<p><em><b>var entryStream = readdirp (options)</b></em></p>
<p>Reads given root recursively and returns a <code>stream</code> of <a href="#entry-info">entry info</a>s.</p>
<h2>entry stream</h2>
<p>Behaves as follows:</p>
<ul>
<li>&lsquo;emit('data&rsquo;)<code>passes an [entry info](#entry-info) whenever one is found -</code>emit('warn')<code>passes a non-fatal</code>Error` that prevents a file/directory from being processed (i.e., if it is inaccessible to the user)</li>
<li>&lsquo;emit('error&rsquo;)<code>passes a fatal</code>Error<code>which also ends the stream (i.e., when illegal options where passed) -</code>emit('end')<code>called when all entries were found and no more will be emitted (i.e., we are done) -</code>emit('close')<code>called when the stream is destroyed via</code>stream.destroy()<code>(which could be useful if you want to manually abort even on a non fatal error) - at that point the stream is no longer</code>readable` and no more entries, warning or errors are emitted</li>
<li>to learn more about streams, consult the very detailed <a href="http://nodejs.org/api/stream.html">nodejs streams documentation</a> or the <a href="https://github.com/substack/stream-handbook">stream-handbook</a></li>
</ul>
<h2>options</h2>
<ul>
<li><b>root</b>: path in which to start reading and recursing into subdirectories</li>
<li><b>fileFilter</b>: filter to include/exclude files found (see <a href="#filters">Filters</a> for more)</li>
<li><b>directoryFilter</b>: filter to include/exclude directories found and to recurse into (see <a href="#filters">Filters</a> for more)</li>
<li><b>depth</b>: depth at which to stop recursing even if more subdirectories are found</li>
<li><b>entryType</b>: determines if data events on the stream should be emitted for &lsquo;'files&rsquo;<code>,</code>'directories'<code>,</code>'both'<code>, or</code>'all'<code>. Setting to</code>'all'<code>will also include entries for other types of file descriptors like character devices, unix sockets and named pipes. Defaults to</code>'files'`.</li>
<li><b>lstat</b>: if <code>true</code>, readdirp uses <code>fs.lstat</code> instead of <code>fs.stat</code> in order to stat files and includes symlink entries in the stream along with files.</li>
</ul>
<h2>entry info</h2>
<p>Has the following properties:</p>
<ul>
<li><b>parentDir</b> : directory in which entry was found (relative to given root)</li>
<li><b>fullParentDir</b> : full path to parent directory</li>
<li><b>name</b> : name of the file/directory</li>
<li><b>path</b> : path to the file/directory (relative to given root)</li>
<li><b>fullPath</b> : full path to the file/directory found</li>
<li><b>stat</b> : built in <a href="http://nodejs.org/docs/v0.4.9/api/fs.html#fs.Stats">stat object</a></li>
<li><b>Example</b>: (assuming root was <code>/User/dev/readdirp</code>) <pre class="fragment">  parentDir     :  'test/bed/root_dir1',
  fullParentDir :  '/User/dev/readdirp/test/bed/root_dir1',
  name          :  'root_dir1_subdir1',
  path          :  'test/bed/root_dir1/root_dir1_subdir1',
  fullPath      :  '/User/dev/readdirp/test/bed/root_dir1/root_dir1_subdir1',
  stat          :  [ ... ]
</pre></li>
</ul>
<h2>Filters</h2>
<p>There are three different ways to specify filters for files and directories respectively.</p>
<ul>
<li><b>function</b>: a function that takes an entry info as a parameter and returns true to include or false to exclude the entry</li>
<li><p class="startli"><b>glob string</b>: a string (e.g., <code>*.js</code>) which is matched using <a href="https://github.com/isaacs/minimatch">minimatch</a>, so go there for more information.</p>
<p class="startli">Globstars (<code>**</code>) are not supported since specifying a recursive pattern for an already recursive function doesn't make sense.</p>
<p class="startli">Negated globs (as explained in the minimatch documentation) are allowed, e.g., <code>!*.txt</code> matches everything but text files.</p>
</li>
<li><p class="startli"><b>array of glob strings</b>: either need to be all inclusive or all exclusive (negated) patterns otherwise an error is thrown.</p>
<p class="startli">&lsquo;[ &rsquo;*.json', '*.js' ]` includes all JavaScript and Json files.</p>
</li>
</ul>
<pre class="fragment">`[ '!.git', '!node_modules' ]` includes all directories except the '.git' and 'node_modules'.
</pre><p>Directories that do not pass a filter will not be recursed into.</p>
<h2>Callback API</h2>
<p>Although the stream api is recommended, readdirp also exposes a callback based api.</p>
<p><em><b>readdirp (options, callback1 [, callback2])</b></em></p>
<p>If callback2 is given, callback1 functions as the <b>fileProcessed</b> callback, and callback2 as the <b>allProcessed</b> callback.</p>
<p>If only callback1 is given, it functions as the <b>allProcessed</b> callback.</p>
<h3>allProcessed</h3>
<ul>
<li>function with err and res parameters, e.g., <code>function (err, res) { ... }</code></li>
<li><b>err</b>: array of errors that occurred during the operation, <b>res may still be present, even if errors occurred</b></li>
<li><b>res</b>: collection of file/directory <a href="#entry-info">entry infos</a></li>
</ul>
<h3>fileProcessed</h3>
<ul>
<li>function with <a href="#entry-info">entry info</a> parameter e.g., <code>function (entryInfo) { ... }</code></li>
</ul>
<h1>More Examples</h1>
<p>&lsquo;on('error&rsquo;, ..)<code>,</code>on('warn', ..)<code>and</code>on('end', ..)` handling omitted for brevity</p>
<div class="fragment"><div class="line">var readdirp = require(&#39;readdirp&#39;);</div><div class="line"></div><div class="line">// Glob file filter</div><div class="line">readdirp({ root: &#39;./test/bed&#39;, fileFilter: &#39;*.js&#39; })</div><div class="line">  .on(&#39;data&#39;, function (entry) {</div><div class="line">    // do something with each JavaScript file entry</div><div class="line">  });</div><div class="line"></div><div class="line">// Combined glob file filters</div><div class="line">readdirp({ root: &#39;./test/bed&#39;, fileFilter: [ &#39;*.js&#39;, &#39;*.json&#39; ] })</div><div class="line">  .on(&#39;data&#39;, function (entry) {</div><div class="line">    // do something with each JavaScript and Json file entry</div><div class="line">  });</div><div class="line"></div><div class="line">// Combined negated directory filters</div><div class="line">readdirp({ root: &#39;./test/bed&#39;, directoryFilter: [ &#39;!.git&#39;, &#39;!*modules&#39; ] })</div><div class="line">  .on(&#39;data&#39;, function (entry) {</div><div class="line">    // do something with each file entry found outside &#39;.git&#39; or any modules directory</div><div class="line">  });</div><div class="line"></div><div class="line">// Function directory filter</div><div class="line">readdirp({ root: &#39;./test/bed&#39;, directoryFilter: function (di) { return di.name.length === 9; } })</div><div class="line">  .on(&#39;data&#39;, function (entry) {</div><div class="line">    // do something with each file entry found inside directories whose name has length 9</div><div class="line">  });</div><div class="line"></div><div class="line">// Limiting depth</div><div class="line">readdirp({ root: &#39;./test/bed&#39;, depth: 1 })</div><div class="line">  .on(&#39;data&#39;, function (entry) {</div><div class="line">    // do something with each file entry found up to 1 subdirectory deep</div><div class="line">  });</div><div class="line"></div><div class="line">// callback api</div><div class="line">readdirp({ root: &#39;.&#39; }, function(fileInfo) {</div><div class="line">   // do something with file entry here</div><div class="line">  }, function (err, res) {</div><div class="line">    // all done, move on or do final step for all file entries here</div><div class="line">});</div></div><!-- fragment --><p>Try more examples by following https://github.com/paulmillr/readdirp/blob/master/examples/Readme.md "instructions" on how to get going.</p>
<h2>tests</h2>
<p>The <a href="https://github.com/paulmillr/readdirp/blob/master/test/readdirp.js">readdirp tests</a> also will give you a good idea on how things work. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
