<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DSMACC: simplify_rates Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DSMACC
   &#160;<span id="projectnumber">2019</span>
   </div>
   <div id="projectbrief">Changes to DSMACC for the thesis of Daniel Ellis</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">simplify_rates Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6db8f9f3f49dea6899ba0f2a4d35f978"><td class="memItemLeft" align="right" valign="top"><a id="a6db8f9f3f49dea6899ba0f2a4d35f978"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>numeric</b> (x)</td></tr>
<tr class="separator:a6db8f9f3f49dea6899ba0f2a4d35f978"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4d43fee0fbf9678d90c62926c876680c"><td class="memItemLeft" align="right" valign="top"><a id="a4d43fee0fbf9678d90c62926c876680c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesimplify__rates.html#a4d43fee0fbf9678d90c62926c876680c">filename</a> = sys.argv[1]</td></tr>
<tr class="memdesc:a4d43fee0fbf9678d90c62926c876680c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rate file we wish to open. <br /></td></tr>
<tr class="separator:a4d43fee0fbf9678d90c62926c876680c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accb9a5eaca8a4c894674fd7328df1ac3"><td class="memItemLeft" align="right" valign="top"><a id="accb9a5eaca8a4c894674fd7328df1ac3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>data</b> = tuple(open(<a class="el" href="namespacesimplify__rates.html#a4d43fee0fbf9678d90c62926c876680c">filename</a>))</td></tr>
<tr class="separator:accb9a5eaca8a4c894674fd7328df1ac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf232c01e969293f2f939cec89a778b9"><td class="memItemLeft" align="right" valign="top"><a id="acf232c01e969293f2f939cec89a778b9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>nonreal</b></td></tr>
<tr class="separator:acf232c01e969293f2f939cec89a778b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a103cda6412711765c1f0b9e76b8d6531"><td class="memItemLeft" align="right" valign="top"><a id="a103cda6412711765c1f0b9e76b8d6531"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>string</b></td></tr>
<tr class="separator:a103cda6412711765c1f0b9e76b8d6531"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0464575d1bab331bf7939b87961ffa6f"><td class="memItemLeft" align="right" valign="top"><a id="a0464575d1bab331bf7939b87961ffa6f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>datalower</b></td></tr>
<tr class="separator:a0464575d1bab331bf7939b87961ffa6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa522a07e391b2e485d618a63fa902532"><td class="memItemLeft" align="right" valign="top"><a id="aa522a07e391b2e485d618a63fa902532"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>constants</b> = re.findall(r'\b(\w+)\b\s*=',datalower)</td></tr>
<tr class="separator:aa522a07e391b2e485d618a63fa902532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade82266907adfa43d287db8ad95cb173"><td class="memItemLeft" align="right" valign="top"><a id="ade82266907adfa43d287db8ad95cb173"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>coeff_d</b> = dict([[j,i] for i,j in enumerate(constants)])</td></tr>
<tr class="separator:ade82266907adfa43d287db8ad95cb173"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6883fe98ae952d900de0c35ca9edba0"><td class="memItemLeft" align="right" valign="top"><a id="ac6883fe98ae952d900de0c35ca9edba0"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>eqns</b> = [ re.sub(r'(\d)[d]([\W\d])', r'\1e\2' , eq ) for eq in re.findall( r'\b\w+\b\s*=\s*([\S ]+)\n', datalower)]</td></tr>
<tr class="separator:ac6883fe98ae952d900de0c35ca9edba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39faabc858790d5788b9077e58bd20fc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesimplify__rates.html#a39faabc858790d5788b9077e58bd20fc">const</a> = constants[i]</td></tr>
<tr class="memdesc:a39faabc858790d5788b9077e58bd20fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">First pass from equation simplification.  <a href="#a39faabc858790d5788b9077e58bd20fc">More...</a><br /></td></tr>
<tr class="separator:a39faabc858790d5788b9077e58bd20fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a7252cbdd68227b6ccbb17ee90e8fa2"><td class="memItemLeft" align="right" valign="top"><a id="a6a7252cbdd68227b6ccbb17ee90e8fa2"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>spfd</b> = False</td></tr>
<tr class="separator:a6a7252cbdd68227b6ccbb17ee90e8fa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a229dbb8f6a9d8a4142256188f3efa7a4"><td class="memItemLeft" align="right" valign="top"><a id="a229dbb8f6a9d8a4142256188f3efa7a4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesimplify__rates.html#a229dbb8f6a9d8a4142256188f3efa7a4">cffs</a> = re.findall(r'\b([A-z]\w*)\b',eqns[coeff_d[name]])</td></tr>
<tr class="memdesc:a229dbb8f6a9d8a4142256188f3efa7a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Second pass. <br /></td></tr>
<tr class="separator:a229dbb8f6a9d8a4142256188f3efa7a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedb66986f43a0c635e57c7368c48a2ec"><td class="memItemLeft" align="right" valign="top"><a id="aedb66986f43a0c635e57c7368c48a2ec"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>j</b> = eqns[coeff_d[name]]</td></tr>
<tr class="separator:aedb66986f43a0c635e57c7368c48a2ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76d1ab81ce30b654efc37f33cde1962b"><td class="memItemLeft" align="right" valign="top"><a id="a76d1ab81ce30b654efc37f33cde1962b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>neweqn</b> = re.sub(r'mpmath.log10\(('+'|'.join(nonreal)+')\)',r'LOG10(\1)',j.replace('log10','mpmath.log10'))</td></tr>
<tr class="separator:a76d1ab81ce30b654efc37f33cde1962b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9681db7e2db921306dd2ee456f65bc61"><td class="memItemLeft" align="right" valign="top"><a id="a9681db7e2db921306dd2ee456f65bc61"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>values</b> = [str(locals()[i]) for i in constants]</td></tr>
<tr class="separator:a9681db7e2db921306dd2ee456f65bc61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab466add2abba2a60a035d1655ebb7c0f"><td class="memItemLeft" align="right" valign="top"><a id="ab466add2abba2a60a035d1655ebb7c0f"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>fixed</b> = [numeric(i) for i in values]</td></tr>
<tr class="separator:ab466add2abba2a60a035d1655ebb7c0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c18a8ba4e3ee8345970ff62482b41ef"><td class="memItemLeft" align="right" valign="top"><a id="a8c18a8ba4e3ee8345970ff62482b41ef"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>df</b> = pd.DataFrame([eqns,values,fixed],columns=constants,index=['original','simplified','parameter']).T</td></tr>
<tr class="separator:a8c18a8ba4e3ee8345970ff62482b41ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cdf5a6cd15c4382f0420647fefded1c"><td class="memItemLeft" align="right" valign="top"><a id="a3cdf5a6cd15c4382f0420647fefded1c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesimplify__rates.html#a3cdf5a6cd15c4382f0420647fefded1c">save</a> = df[df.parameter]</td></tr>
<tr class="memdesc:a3cdf5a6cd15c4382f0420647fefded1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">split into variable and fixed rate constants <br /></td></tr>
<tr class="separator:a3cdf5a6cd15c4382f0420647fefded1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96869f829cae709ac6fd563faf6d5791"><td class="memItemLeft" align="right" valign="top"><a id="a96869f829cae709ac6fd563faf6d5791"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>variable</b> = df[df.parameter==False]</td></tr>
<tr class="separator:a96869f829cae709ac6fd563faf6d5791"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d2c39c6058806173e47118bd65e3f2c"><td class="memItemLeft" align="right" valign="top"><a id="a1d2c39c6058806173e47118bd65e3f2c"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>definitions</b> = 'Real(dp) :: '+ ','.join(variable.index) + '\n'</td></tr>
<tr class="separator:a1d2c39c6058806173e47118bd65e3f2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bbe67188c1665ed96ab5e7bd7cf0ce0"><td class="memItemLeft" align="right" valign="top"><a id="a2bbe67188c1665ed96ab5e7bd7cf0ce0"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>variables</b> = ''</td></tr>
<tr class="separator:a2bbe67188c1665ed96ab5e7bd7cf0ce0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Simplifying the rate coefficients of DSMACC using the sympy symbolic simplification library

Creates a Param definition file, and a variable definition file. 


daniel.ellis@york.ac.uk 2017
</pre> </div><h2 class="groupheader">Variable Documentation</h2>
<a id="a39faabc858790d5788b9077e58bd20fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39faabc858790d5788b9077e58bd20fc">&#9670;&nbsp;</a></span>const</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simplify_rates.const = constants[i]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>First pass from equation simplification. </p>
<ul>
<li>this round identifies equations that are exclusively numeric </li>
</ul>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
