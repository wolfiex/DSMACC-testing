An incredibly fast Java\+Script library for \href{https://en.wikipedia.org/wiki/Delaunay_triangulation}{\tt Delaunay triangulation} of 2D points.


\begin{DoxyItemize}
\item \href{https://mapbox.github.io/delaunator/demo.html}{\tt Interactive Demo}
\item \href{https://mapbox.github.io/delaunator/}{\tt Guide to data structures}
\end{DoxyItemize}

\subsubsection*{Projects based on Delaunator}


\begin{DoxyItemize}
\item \href{https://github.com/d3/d3-delaunay}{\tt d3-\/delaunay} for Voronoi diagrams, search, traversal and rendering.
\item \href{https://github.com/Fil/d3-geo-voronoi}{\tt d3-\/geo-\/voronoi} for Delaunay triangulations and Voronoi diagrams on a sphere (e.\+g. for geographic locations).
\end{DoxyItemize}

\subsubsection*{Ports to other languages}


\begin{DoxyItemize}
\item \href{https://github.com/mourner/delaunator-rs}{\tt delaunator-\/rs} (Rust)
\item \href{https://github.com/fogleman/delaunay}{\tt fogleman/delaunay} (Go)
\item \href{https://github.com/delfrrr/delaunator-cpp}{\tt delaunator-\/cpp} (C++)
\end{DoxyItemize}



\subsection*{Example}


\begin{DoxyCode}
const points = [[168, 180], [168, 178], [168, 179], [168, 181], [168, 183], ...];

const delaunay = Delaunator.from(points);
console.log(delaunay.triangles);
// [623, 636, 619,  636, 444, 619, ...]
\end{DoxyCode}


\subsection*{Install}

Install with N\+PM ({\ttfamily npm install delaunator}) or Yarn ({\ttfamily yarn add delaunator}), then\+:


\begin{DoxyCode}
// import as an ES module
import Delaunator from 'delaunator';

// or require in Node / Browserify
const Delaunator = require('delaunator');
\end{DoxyCode}


Or use a browser build directly\+:


\begin{DoxyCode}
<script src="https://unpkg.com/delaunator@4.0.0/delaunator.min.js"></script> 
<script src="https://unpkg.com/delaunator@4.0.0/delaunator.js"></script> 
\end{DoxyCode}


\subsection*{A\+PI Reference}

\paragraph*{Delaunator.\+from(points\mbox{[}, get\+X, get\+Y\mbox{]})}

Constructs a delaunay triangulation object given an array of points ({\ttfamily \mbox{[}x, y\mbox{]}} by default). {\ttfamily getX} and {\ttfamily getY} are optional functions of the form {\ttfamily (point) =$>$ value} for custom point formats. Duplicate points are skipped.

\paragraph*{new Delaunator(coords)}

Constructs a delaunay triangulation object given an array of point coordinates of the form\+: {\ttfamily \mbox{[}x0, y0, x1, y1, ...\mbox{]}} (use a typed array for best performance).

\paragraph*{delaunay.\+triangles}

A {\ttfamily Uint32\+Array} array of triangle vertex indices (each group of three numbers forms a triangle). All triangles are directed counterclockwise.

To get the coordinates of all triangles, use\+:


\begin{DoxyCode}
for (let i = 0; i < triangles.length; i += 3) \{
    coordinates.push([
        points[triangles[i]],
        points[triangles[i + 1]],
        points[triangles[i + 2]]
    ]);
\}
\end{DoxyCode}


\paragraph*{delaunay.\+halfedges}

A {\ttfamily Int32\+Array} array of triangle half-\/edge indices that allows you to traverse the triangulation. {\ttfamily i}-\/th half-\/edge in the array corresponds to vertex {\ttfamily triangles\mbox{[}i\mbox{]}} the half-\/edge is coming from. {\ttfamily halfedges\mbox{[}i\mbox{]}} is the index of a twin half-\/edge in an adjacent triangle (or {\ttfamily -\/1} for outer half-\/edges on the convex hull).

The flat array-\/based data structures might be counterintuitive, but they\textquotesingle{}re one of the key reasons this library is fast.

\paragraph*{delaunay.\+hull}

A {\ttfamily Uint32\+Array} array of indices that reference points on the convex hull of the input data, counter-\/clockwise.

\paragraph*{delaunay.\+coords}

An array of input coordinates in the form {\ttfamily \mbox{[}x0, y0, x1, y1, ....\mbox{]}}, of the type provided in the constructor (or {\ttfamily Float64\+Array} if you used {\ttfamily Delaunator.\+from}).

\paragraph*{delaunay.\+update()}

Updates the triangulation if you modified {\ttfamily delaunay.\+coords} values in place, avoiding expensive memory allocations. Useful for iterative relaxation algorithms such as \href{https://en.wikipedia.org/wiki/Lloyd%27s_algorithm}{\tt Lloyd\textquotesingle{}s}.

\subsection*{Performance}

Benchmark results against other Delaunay JS libraries ({\ttfamily npm run bench} on Macbook Pro Retina 15" 2017, \mbox{\hyperlink{classNode}{Node}} v10.\+10.\+0)\+:

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{9}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ ~  }&\textbf{ uniform 100k  }&\textbf{ gauss 100k  }&\textbf{ grid 100k  }&\multicolumn{5}{p{(\linewidth-\tabcolsep*9-\arrayrulewidth*5)*5/9}|}{\cellcolor{\tableheadbgcolor}\textbf{ de   }}\\\cline{1-9}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ ~  }&\textbf{ uniform 100k  }&\textbf{ gauss 100k  }&\textbf{ grid 100k  }&\multicolumn{5}{p{(\linewidth-\tabcolsep*9-\arrayrulewidth*5)*5/9}|}{\cellcolor{\tableheadbgcolor}\textbf{ de   }}\\\cline{1-9}
\endhead
{\bfseries delaunator}  &82ms  &61ms  &66ms  &25ms  &1.\+07s  &950ms  &830ms  &278ms   \\\cline{1-9}
\href{https://github.com/Bathlamos/delaunay-triangulation}{\tt faster\&\#8209;delaunay}  &473ms  &411ms  &272ms  &68ms  &4.\+27s  &4.\+62s  &4.\+3s  &810ms   \\\cline{1-9}
\href{https://github.com/mikolalysenko/incremental-delaunay}{\tt incremental\&\#8209;delaunay}  &547ms  &505ms  &172ms  &528ms  &5.\+9s  &6.\+08s  &2.\+11s  &6.\+09s   \\\cline{1-9}
\href{https://github.com/d3/d3-voronoi}{\tt d3\&\#8209;voronoi}  &972ms  &909ms  &358ms  &720ms  &15.\+04s  &13.\+86s  &5.\+55s  &11.\+13s   \\\cline{1-9}
\href{https://github.com/ironwallaby/delaunay}{\tt delaunay\&\#8209;fast}  &3.\+8s  &4s  &12.\+57s  &timeout  &132s  &138s  &399s  &timeout   \\\cline{1-9}
\href{https://github.com/darkskyapp/delaunay}{\tt delaunay}  &4.\+85s  &5.\+73s  &15.\+05s  &timeout  &156s  &178s  &326s  &timeout   \\\cline{1-9}
\href{https://github.com/mikolalysenko/delaunay-triangulate}{\tt delaunay\&\#8209;triangulate}  &2.\+24s  &2.\+04s  &O\+OM  &1.\+51s  &O\+OM  &O\+OM  &O\+OM  &O\+OM   \\\cline{1-9}
\href{https://github.com/mikolalysenko/cdt2d}{\tt cdt2d}  &45s  &51s  &118s  &17s  &timeout  &timeout  &timeout  &timeout   \\\cline{1-9}
\end{longtabu}


\subsection*{Papers}

The algorithm is based on ideas from the following papers\+:


\begin{DoxyItemize}
\item \href{http://www.academicpub.org/jao/paperInfo.aspx?paperid=15630}{\tt A simple sweep-\/line Delaunay triangulation algorithm}, 2013, Liu Yonghe, Feng Jinming and Shao Yuehong
\item \href{http://www.s-hull.org/paper/s_hull.pdf}{\tt S-\/hull\+: a fast radial sweep-\/hull routine for Delaunay triangulation}, 2010, David Sinclair
\item \href{http://cglab.ca/~biniaz/papers/Sweep%20Circle.pdf}{\tt A faster circle-\/sweep Delaunay triangulation algorithm}, 2011, Ahmad Biniaz and Gholamhossein Dastghaibyfard 
\end{DoxyItemize}