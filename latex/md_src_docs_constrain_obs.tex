\subparagraph*{In this guide we shall approximate a diurnal equation using a}

function, and then include this in the constraints array of D\+S\+M\+A\+CC

Note\+: the dim of the curve fit need to be adjusted, as does the pressision of the fitting. This will be done in future automatically, but until then this should serve as a guide. (high dim corresponds to more calculations,and thus a slower running model). As dims are by default, xlength-\/1, do not supply more than 10 day fraction values.

Program\+: Julia -\/ although python or any other curve fitting program may be used.

\subsubsection*{Firstly we need some observations}

To do this I shall use a H\+O2 diurnal taken from the Thesis of Peter M. Edwards -\/ Tropospheric oxidation from the Tropics to the Poles, Leeds
\begin{DoxyEnumerate}
\item 
\end{DoxyEnumerate}



I shall use readings every 0.\+1 fraction/day from the Black line. These are out trial concentrations for the method, so the actual values do not matter. ~\newline



\begin{DoxyCode}
# To get a fit for the observations I use Julia as it seems the easiest 
method
# Include libraries (install with Pkg.add("libraryname"))
using Polynomials
using UnicodePlots
\end{DoxyCode}



\begin{DoxyCode}
species = "HO2"
observations = [8e-10,1e-9,1e-9,2e-9,8e-9,1.4e-8,1.3e-8,7e-9,1e-9,9e-10]
hours  = linspace(0,1,length(observations)) #fract day 


#curve of observations
#length = len(x) -1 - change this or do not use > 10 observation points 
-> smoothing
fit = polyfit(hours,[log10(x) for x in observations])
print(fit)


#Since this will be run in a terminal we can use unicode plotting to 
check that we are not overfitting. 
xaxis = linspace(0,1,100)
ypred = [(10^fit(x))/1e-8 for x in xaxis] #divided by 1e-8 to get rid of 
the log axis requirement as per original plot


#plotting
myplot = lineplot(xaxis,ypred, title = species, name = "Prediction",  
color=:blue,border=:bold)
myplot = scatterplot!(myplot, hours, [i/1.e-8 for i in observations], 
name = "Observations",color=:magenta)

println(myplot)
\end{DoxyCode}
 \begin{DoxyVerb}Poly(-9.136910012988708 - 19.043869223495985*x + 
\end{DoxyVerb}
 481.\+4511050554504$\ast$x$^\wedge$2 -\/ 4471.\+672275544299$\ast$x$^\wedge$3 + 20929.\+295613210943$\ast$x$^\wedge$4 -\/ 55026.\+76874840524$\ast$x$^\wedge$5 + 85141.\+43766292353$\ast$x$^\wedge$6 -\/ 77002.\+83860070464$\ast$x$^\wedge$7 + 37641.\+488066733735$\ast$x$^\wedge$8 -\/ 7673.\+297801523576$\ast$x$^\wedge$9)\mbox{[}1m\mbox{[}0m €37mâ €mmmmâ €\mbox{[}37mâ € ~\newline
 E model\+\_\+\+Global, O\+N\+LY\+: C\+O\+N\+S\+T\+R\+A\+IN,C\+F\+A\+C\+T\+OR~\newline
~\newline
\char`\"{}
h\+\_\+fract = \char`\"{}D\+F\+R\+A\+CT = mod(((D\+A\+Y\+C\+O\+U\+N\+T\+E\+R$\ast$dt)/86400.) + mod(J\+D\+AY,1.),1.)~\newline
"

eq1 = \char`\"{}\+C(ind\+\_\+\$(species))= C\+F\+A\+C\+T\+O\+R$\ast$(10$\ast$$\ast$(\$(s\+\_\+eq)))\char`\"{} eq2 = \char`\"{}\+C\+O\+N\+S\+T\+R\+A\+I\+N(ind\+\_\+\$(species)) = C(ind\+\_\+\$(species))\char`\"{}

println(use $\ast$ h\+\_\+fract $\ast$ \char`\"{}\textbackslash{}n\char`\"{} $\ast$eq1 $\ast$ \char`\"{}\textbackslash{}n\char`\"{} $\ast$ eq2) \`{}\`{}\`{} \begin{DoxyVerb}USE model_Global,       ONLY: CONSTRAIN,CFACTOR

DFRACT = mod(((DAYCOUNTER*dt)/86400.) + mod(JDAY,1.),1.)

C(ind_HO2)= CFACTOR*(10**(-9.0969 - 19.0438*DFRACT &
    + 481.4511*DFRACT**2 - 4471.6722*DFRACT**3 &
    + 20929.2956*DFRACT**4 - 55026.7687*DFRACT**5 &
    + 85141.4376*DFRACT**6 - 77002.8386*DFRACT**7 &
    + 37641.4880*DFRACT**8 - 7673.2978*DFRACT**9))
CONSTRAIN(ind_HO2) = C(ind_HO2)
\end{DoxyVerb}


\subsection*{Results\+:}

Below are the results as a proof of concept. If you just want to vary temp, You may import the variable using \begin{DoxyVerb}        USE model_Global,       ONLY: CONSTRAIN,CFACTOR,TEMP
\end{DoxyVerb}


replace C(ind\+\_\+\+H\+O2) with T\+E\+MP and ommit the line C\+O\+N\+S\+T\+R\+A\+I\+N(ind\+\_\+\+H\+O2) = C(ind\+\_\+\+H\+O2).

\paragraph*{Pre constraing -\/ H\+O2 is used up over time}



\paragraph*{After constraining all peaks are identical and match our \char`\"{}observed\char`\"{}}

values  