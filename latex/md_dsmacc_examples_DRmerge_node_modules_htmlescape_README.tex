Properly escape J\+S\+ON for usage as an object literal inside of a {\ttfamily $<$script$>$} tag. Use {\ttfamily htmlescape} in place of {\ttfamily J\+S\+O\+N.\+stringify}. For more info see \href{http://timelessrepo.com/json-isnt-a-javascript-subset}{\tt J\+S\+O\+N\+: The Java\+Script subset that isn\textquotesingle{}t}.

\subsection*{Transformations}

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ from  }&\textbf{ to   }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ from  }&\textbf{ to   }\\\cline{1-2}
\endhead
{\ttfamily \&}  &{\ttfamily \textbackslash{}\textbackslash{}u0026}   \\\cline{1-2}
{\ttfamily $>$}  &{\ttfamily \textbackslash{}\textbackslash{}u003e}   \\\cline{1-2}
{\ttfamily $<$}  &{\ttfamily \textbackslash{}\textbackslash{}u003c}   \\\cline{1-2}
{\ttfamily \textbackslash{}u2028}  &{\ttfamily \textbackslash{}\textbackslash{}u2028}   \\\cline{1-2}
{\ttfamily \textbackslash{}u2029}  &{\ttfamily \textbackslash{}\textbackslash{}u2029}   \\\cline{1-2}
\end{longtabu}


\subsection*{Usage}


\begin{DoxyCode}
var htmlescape = require('htmlescape');
htmlescape(\{prop:'value'\});
//=> '\{"prop":"value"\}'
\end{DoxyCode}


Or in your templates\+:


\begin{DoxyCode}
<script>
var payload = <%= htmlescape(payload) %>;
</script>
\end{DoxyCode}
 