This module provides a Java\+Script implementation of the venerable \href{http://pubs.opengroup.org/onlinepubs/009695399/functions/strptime.html}{\tt strptime} and \href{http://pubs.opengroup.org/onlinepubs/007908799/xsh/strftime.html}{\tt strftime} functions from the C standard library, and can be used to parse or format \href{https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date}{\tt dates} in a variety of locale-\/specific representations. To format a date, create a \href{#locale_format}{\tt formatter} from a specifier (a string with the desired format {\itshape directives}, indicated by {\ttfamily \%}); then pass a date to the formatter, which returns a string. For example, to convert the current date to a human-\/readable string\+:


\begin{DoxyCode}
var formatTime = d3.timeFormat("%B %d, %Y");
formatTime(new Date); // "June 30, 2015"
\end{DoxyCode}


Likewise, to convert a string back to a date, create a \href{#locale_parse}{\tt parser}\+:


\begin{DoxyCode}
var parseTime = d3.timeParse("%B %d, %Y");
parseTime("June 30, 2015"); // Tue Jun 30 2015 00:00:00 GMT-0700 (PDT)
\end{DoxyCode}


You can implement more elaborate conditional time formats, too. For example, here’s a \href{http://bl.ocks.org/mbostock/4149176}{\tt multi-\/scale time format} using \href{https://github.com/d3/d3-time}{\tt time intervals}\+:


\begin{DoxyCode}
var formatMillisecond = d3.timeFormat(".%L"),
    formatSecond = d3.timeFormat(":%S"),
    formatMinute = d3.timeFormat("%I:%M"),
    formatHour = d3.timeFormat("%I %p"),
    formatDay = d3.timeFormat("%a %d"),
    formatWeek = d3.timeFormat("%b %d"),
    formatMonth = d3.timeFormat("%B"),
    formatYear = d3.timeFormat("%Y");

function multiFormat(date) \{
  return (d3.timeSecond(date) < date ? formatMillisecond
      : d3.timeMinute(date) < date ? formatSecond
      : d3.timeHour(date) < date ? formatMinute
      : d3.timeDay(date) < date ? formatHour
      : d3.timeMonth(date) < date ? (d3.timeWeek(date) < date ? formatDay : formatWeek)
      : d3.timeYear(date) < date ? formatMonth
      : formatYear)(date);
\}
\end{DoxyCode}


This module is used by D3 \href{https://github.com/d3/d3-scale/blob/master/README.md#time-scales}{\tt time scales} to generate human-\/readable ticks.

\subsection*{Installing}

If you use N\+PM, {\ttfamily npm install d3-\/time-\/format}. Otherwise, download the \href{https://github.com/d3/d3-time-format/releases/latest}{\tt latest release}. You can also load directly from \href{https://d3js.org}{\tt d3js.\+org}, either as a \href{https://d3js.org/d3-time-format.v2.min.js}{\tt standalone library} or as part of \href{https://github.com/d3/d3}{\tt D3 4.\+0}. A\+MD, Common\+JS, and vanilla environments are supported. In vanilla, a {\ttfamily d3} global is exported\+:


\begin{DoxyCode}
<script src="https://d3js.org/d3-time.v1.min.js"></script>
<script src="https://d3js.org/d3-time-format.v2.min.js"></script>
<script>

var format = d3.timeFormat("%x");

</script>
\end{DoxyCode}


Locale files are hosted on \href{https://unpkg.com/}{\tt unpkg} and can be loaded using \href{https://github.com/d3/d3-request/blob/master/README.md#json}{\tt d3.\+json}. For example, to set Russian as the default locale\+:


\begin{DoxyCode}
d3.json("https://unpkg.com/d3-time-format@2/locale/ru-RU.json", function(error, locale) \{
  if (error) throw error;

  d3.timeFormatDefaultLocale(locale);

  var format = d3.timeFormat("%c");

  console.log(format(new Date)); // понедельник,  5 декабря 2016 г. 10:31:59
\});
\end{DoxyCode}


\href{https://tonicdev.com/npm/d3-time-format}{\tt Try d3-\/time-\/format in your browser.}

\subsection*{A\+PI Reference}

\label{_timeFormat}%
\# d3.{\bfseries time\+Format}({\itshape specifier}) \href{https://github.com/d3/d3-time-format/blob/master/src/defaultLocale.js#L4}{\tt $<$$>$}

An alias for \href{#locale_format}{\tt {\itshape locale}.format} on the \href{#timeFormatDefaultLocale}{\tt default locale}.

\label{_timeParse}%
\# d3.{\bfseries time\+Parse}({\itshape specifier}) \href{https://github.com/d3/d3-time-format/blob/master/src/defaultLocale.js#L5}{\tt $<$$>$}

An alias for \href{#locale_parse}{\tt {\itshape locale}.parse} on the \href{#timeFormatDefaultLocale}{\tt default locale}.

\label{_utcFormat}%
\# d3.{\bfseries utc\+Format}({\itshape specifier}) \href{https://github.com/d3/d3-time-format/blob/master/src/defaultLocale.js#L6}{\tt $<$$>$}

An alias for \href{#locale_utcFormat}{\tt {\itshape locale}.utc\+Format} on the \href{#timeFormatDefaultLocale}{\tt default locale}.

\label{_utcParse}%
\# d3.{\bfseries utc\+Parse}({\itshape specifier}) \href{https://github.com/d3/d3-time-format/blob/master/src/defaultLocale.js#L7}{\tt $<$$>$}

An alias for \href{#locale_utcParse}{\tt {\itshape locale}.utc\+Parse} on the \href{#timeFormatDefaultLocale}{\tt default locale}.

\label{_isoFormat}%
\# d3.{\bfseries iso\+Format} \href{https://github.com/d3/d3-time-format/blob/master/src/isoFormat.js}{\tt $<$$>$}

The full \href{https://en.wikipedia.org/wiki/ISO_8601}{\tt I\+SO 8601} U\+TC time formatter. Where available, this method will use \href{https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toISOString}{\tt Date.\+to\+I\+S\+O\+String} to format.

\label{_isoParse}%
\# d3.{\bfseries iso\+Parse} \href{https://github.com/d3/d3-time-format/blob/master/src/isoParse.js}{\tt $<$$>$}

The full \href{https://en.wikipedia.org/wiki/ISO_8601}{\tt I\+SO 8601} U\+TC time parser. Where available, this method will use the \href{https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date}{\tt Date constructor} to parse strings. If you depend on strict validation of the input format according to I\+SO 8601, you should construct a \href{#utcParse}{\tt U\+TC parser function}\+:


\begin{DoxyCode}
var strictIsoParse = d3.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");
\end{DoxyCode}


\label{_locale_format}%
\# {\itshape locale}.{\bfseries format}({\itshape specifier}) \href{https://github.com/d3/d3-time-format/blob/master/src/locale.js#L293}{\tt $<$$>$}

Returns a new formatter for the given string {\itshape specifier}. The specifier string may contain the following directives\+:


\begin{DoxyItemize}
\item {\ttfamily a} -\/ abbreviated weekday name.$\ast$
\item {\ttfamily A} -\/ full weekday name.$\ast$
\item {\ttfamily b} -\/ abbreviated month name.$\ast$
\item {\ttfamily B} -\/ full month name.$\ast$
\item {\ttfamily c} -\/ the locale’s date and time, such as {\ttfamily x, X}.$\ast$
\item {\ttfamily d} -\/ zero-\/padded day of the month as a decimal number \mbox{[}01,31\mbox{]}.
\item {\ttfamily e} -\/ space-\/padded day of the month as a decimal number \mbox{[} 1,31\mbox{]}; equivalent to {\ttfamily \+\_\+d}.
\item {\ttfamily f} -\/ microseconds as a decimal number \mbox{[}000000, 999999\mbox{]}.
\item {\ttfamily H} -\/ hour (24-\/hour clock) as a decimal number \mbox{[}00,23\mbox{]}.
\item {\ttfamily I} -\/ hour (12-\/hour clock) as a decimal number \mbox{[}01,12\mbox{]}.
\item {\ttfamily j} -\/ day of the year as a decimal number \mbox{[}001,366\mbox{]}.
\item {\ttfamily m} -\/ month as a decimal number \mbox{[}01,12\mbox{]}.
\item {\ttfamily M} -\/ minute as a decimal number \mbox{[}00,59\mbox{]}.
\item {\ttfamily L} -\/ milliseconds as a decimal number \mbox{[}000, 999\mbox{]}.
\item {\ttfamily p} -\/ either AM or PM.$\ast$
\item {\ttfamily Q} -\/ milliseconds since U\+N\+IX epoch.
\item {\ttfamily s} -\/ seconds since U\+N\+IX epoch.
\item {\ttfamily S} -\/ second as a decimal number \mbox{[}00,61\mbox{]}.
\item {\ttfamily u} -\/ Monday-\/based (I\+SO 8601) weekday as a decimal number \mbox{[}1,7\mbox{]}.
\item {\ttfamily U} -\/ Sunday-\/based week of the year as a decimal number \mbox{[}00,53\mbox{]}.
\item {\ttfamily V} -\/ I\+SO 8601 week of the year as a decimal number \mbox{[}01, 53\mbox{]}.
\item {\ttfamily w} -\/ Sunday-\/based weekday as a decimal number \mbox{[}0,6\mbox{]}.
\item {\ttfamily W} -\/ Monday-\/based week of the year as a decimal number \mbox{[}00,53\mbox{]}.
\item {\ttfamily x} -\/ the locale’s date, such as {\ttfamily \%-\/m/\%-\/d/Y}.$\ast$
\item {\ttfamily X} -\/ the locale’s time, such as {\ttfamily \%-\/I\+:M\+:S p}.$\ast$
\item {\ttfamily y} -\/ year without century as a decimal number \mbox{[}00,99\mbox{]}.
\item {\ttfamily Y} -\/ year with century as a decimal number.
\item {\ttfamily Z} -\/ time zone offset, such as {\ttfamily -\/0700}, {\ttfamily -\/07\+:00}, {\ttfamily -\/07}, or {\ttfamily Z}.
\item {\ttfamily \%\%} -\/ a literal percent sign ({\ttfamily \%}).
\end{DoxyItemize}

Directives marked with an asterisk ($\ast$) may be affected by the \href{#localeFormat}{\tt locale definition}.

For {\ttfamily U}, all days in a new year preceding the first Sunday are considered to be in week 0. For {\ttfamily W}, all days in a new year preceding the first Monday are considered to be in week 0. Week numbers are computed using \href{https://github.com/d3/d3-time/blob/master/README.md#interval_count}{\tt {\itshape interval}.count}. For example, 2015-\/52 and 2016-\/00 represent Monday, December 28, 2015, while 2015-\/53 and 2016-\/01 represent Monday, January 4, 2016. This differs from the \href{https://en.wikipedia.org/wiki/ISO_week_date}{\tt I\+SO week date} specification ({\ttfamily V}), which uses a more complicated definition!

For {\ttfamily V}, per the \href{http://man7.org/linux/man-pages/man3/strftime.3.html}{\tt strftime man page}\+:

\begin{quote}
In this system, weeks start on a Monday, and are numbered from 01, for the first week, up to 52 or 53, for the last week. Week 1 is the first week where four or more days fall within the new year (or, synonymously, week 01 is\+: the first week of the year that contains a Thursday; or, the week that has 4 January in it). \end{quote}


The {\ttfamily \%} sign indicating a directive may be immediately followed by a padding modifier\+:


\begin{DoxyItemize}
\item {\ttfamily 0} -\/ zero-\/padding
\item {\ttfamily \+\_\+} -\/ space-\/padding
\item {\ttfamily -\/} -\/ disable padding
\end{DoxyItemize}

If no padding modifier is specified, the default is {\ttfamily 0} for all directives except {\ttfamily e}, which defaults to {\ttfamily \+\_\+}. (In some implementations of strftime and strptime, a directive may include an optional field width or precision; this feature is not yet implemented.)

The returned function formats a specified {\itshape \href{https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date}{\tt date}}, returning the corresponding string.


\begin{DoxyCode}
var formatMonth = d3.timeFormat("%B"),
    formatDay = d3.timeFormat("%A"),
    date = new Date(2014, 4, 1); // Thu May 01 2014 00:00:00 GMT-0700 (PDT)

formatMonth(date); // "May"
formatDay(date); // "Thursday"
\end{DoxyCode}


\label{_locale_parse}%
\# {\itshape locale}.{\bfseries parse}({\itshape specifier}) \href{https://github.com/d3/d3-time-format/blob/master/src/locale.js#L298}{\tt $<$$>$}

Returns a new parser for the given string {\itshape specifier}. The specifier string may contain the same directives as \href{#locale_format}{\tt {\itshape locale}.format}. The {\ttfamily d} and {\ttfamily e} directives are considered equivalent for parsing.

The returned function parses a specified {\itshape string}, returning the corresponding \href{https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date}{\tt date} or null if the string could not be parsed according to this format’s specifier. Parsing is strict\+: if the specified {\itshape string} does not exactly match the associated specifier, this method returns null. For example, if the associated specifier is {\ttfamily Y-\/m-\/dTH\+:M\+:SZ}, then the string {\ttfamily \char`\"{}2011-\/07-\/01\+T19\+:15\+:28\+Z\char`\"{}} will be parsed as expected, but {\ttfamily \char`\"{}2011-\/07-\/01\+T19\+:15\+:28\char`\"{}}, {\ttfamily \char`\"{}2011-\/07-\/01 19\+:15\+:28\char`\"{}} and {\ttfamily \char`\"{}2011-\/07-\/01\char`\"{}} will return null. (Note that the literal {\ttfamily Z} here is different from the time zone offset directive {\ttfamily Z}.) If a more flexible parser is desired, try multiple formats sequentially until one returns non-\/null.

\label{_locale_utcFormat}%
\# {\itshape locale}.{\bfseries utc\+Format}({\itshape specifier}) \href{https://github.com/d3/d3-time-format/blob/master/src/locale.js#L303}{\tt $<$$>$}

Equivalent to \href{#locale_format}{\tt {\itshape locale}.format}, except all directives are interpreted as \href{https://en.wikipedia.org/wiki/Coordinated_Universal_Time}{\tt Coordinated Universal Time (U\+TC)} rather than local time.

\label{_locale_utcParse}%
\# {\itshape locale}.{\bfseries utc\+Parse}({\itshape specifier}) \href{https://github.com/d3/d3-time-format/blob/master/src/locale.js#L308}{\tt $<$$>$}

Equivalent to \href{#locale_parse}{\tt {\itshape locale}.parse}, except all directives are interpreted as \href{https://en.wikipedia.org/wiki/Coordinated_Universal_Time}{\tt Coordinated Universal Time (U\+TC)} rather than local time.

\subsubsection*{Locales}

\label{_timeFormatLocale}%
\# d3.{\bfseries time\+Format\+Locale}({\itshape definition}) \href{https://github.com/d3/d3-time-format/blob/master/src/locale.js}{\tt $<$$>$}

Returns a {\itshape locale} object for the specified {\itshape definition} with \href{#locale_format}{\tt {\itshape locale}.format}, \href{#locale_parse}{\tt {\itshape locale}.parse}, \href{#locale_utcFormat}{\tt {\itshape locale}.utc\+Format}, \href{#locale_utcParse}{\tt {\itshape locale}.utc\+Parse} methods. The {\itshape definition} must include the following properties\+:


\begin{DoxyItemize}
\item {\ttfamily date\+Time} -\/ the date and time ({\ttfamily c}) format specifier ({\itshape e.\+g.}, {\ttfamily \char`\"{}\%a \%b \%e \%\+X \%\+Y\char`\"{}}).
\item {\ttfamily date} -\/ the date ({\ttfamily x}) format specifier ({\itshape e.\+g.}, {\ttfamily \char`\"{}\%m/\%d/\%\+Y\char`\"{}}).
\item {\ttfamily time} -\/ the time ({\ttfamily X}) format specifier ({\itshape e.\+g.}, {\ttfamily \char`\"{}\%\+H\+:\%\+M\+:\%\+S\char`\"{}}).
\item {\ttfamily periods} -\/ the A.\+M. and P.\+M. equivalents ({\itshape e.\+g.}, {\ttfamily \mbox{[}\char`\"{}\+A\+M\char`\"{}, \char`\"{}\+P\+M\char`\"{}\mbox{]}}).
\item {\ttfamily days} -\/ the full names of the weekdays, starting with Sunday.
\item {\ttfamily short\+Days} -\/ the abbreviated names of the weekdays, starting with Sunday.
\item {\ttfamily months} -\/ the full names of the months (starting with January).
\item {\ttfamily short\+Months} -\/ the abbreviated names of the months (starting with January).
\end{DoxyItemize}

For an example, see \href{https://bl.ocks.org/mbostock/805115ebaa574e771db1875a6d828949}{\tt Localized Time Axis II}.

\label{_timeFormatDefaultLocale}%
\# d3.{\bfseries time\+Format\+Default\+Locale}({\itshape definition}) \href{https://github.com/d3/d3-time-format/blob/master/src/defaultLocale.js}{\tt $<$$>$}

Equivalent to \href{#timeFormatLocale}{\tt d3.\+time\+Format\+Locale}, except it also redefines \href{#timeFormat}{\tt d3.\+time\+Format}, \href{#timeParse}{\tt d3.\+time\+Parse}, \href{#utcFormat}{\tt d3.\+utc\+Format} and \href{#utcParse}{\tt d3.\+utc\+Parse} to the new locale’s \href{#locale_format}{\tt {\itshape locale}.format}, \href{#locale_parse}{\tt {\itshape locale}.parse}, \href{#locale_utcFormat}{\tt {\itshape locale}.utc\+Format} and \href{#locale_utcParse}{\tt {\itshape locale}.utc\+Parse}. If you do not set a default locale, it defaults to \href{https://github.com/d3/d3-time-format/blob/master/locale/en-US.json}{\tt U.\+S. English}.

For an example, see \href{https://bl.ocks.org/mbostock/6f1cc065d4d172bcaf322e399aa8d62f}{\tt Localized Time Axis}. 