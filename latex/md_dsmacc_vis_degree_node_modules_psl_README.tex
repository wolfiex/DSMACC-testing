\href{https://nodei.co/npm/psl/}{\tt }

\href{https://greenkeeper.io/}{\tt } \href{https://travis-ci.org/wrangr/psl}{\tt } \href{https://david-dm.org/wrangr/psl#info=devDependencies}{\tt }

{\ttfamily psl} is a {\ttfamily Java\+Script} domain name parser based on the \href{https://publicsuffix.org/}{\tt Public Suffix List}.

This implementation is tested against the \href{http://mxr.mozilla.org/mozilla-central/source/netwerk/test/unit/data/test_psl.txt?raw=1}{\tt test data hosted by Mozilla} and kindly provided by \href{https://www.comodo.com/}{\tt Comodo}.

\subsection*{What is the Public Suffix List?}

The Public Suffix List is a cross-\/vendor initiative to provide an accurate list of domain name suffixes.

The Public Suffix List is an initiative of the Mozilla Project, but is maintained as a community resource. It is available for use in any software, but was originally created to meet the needs of browser manufacturers.

A \char`\"{}public suffix\char`\"{} is one under which Internet users can directly register names. Some examples of public suffixes are \char`\"{}.\+com\char`\"{}, \char`\"{}.\+co.\+uk\char`\"{} and \char`\"{}pvt.\+k12.\+wy.\+us\char`\"{}. The Public Suffix List is a list of all known public suffixes.

Source\+: \href{http://publicsuffix.org}{\tt http\+://publicsuffix.\+org}

\subsection*{Installation}

\subsubsection*{Node.\+js}


\begin{DoxyCode}
npm install --save psl
\end{DoxyCode}


\subsubsection*{Browser}

Download \href{https://raw.githubusercontent.com/wrangr/psl/master/dist/psl.min.js}{\tt psl.\+min.\+js} and include it in a script tag.


\begin{DoxyCode}
<script src="psl.min.js"></script>
\end{DoxyCode}


This script is browserified and wrapped in a \href{https://github.com/umdjs/umd}{\tt umd} wrapper so you should be able to use it standalone or together with a module loader.

\subsection*{A\+PI}

\subsubsection*{{\ttfamily psl.\+parse(domain)}}

Parse domain based on Public Suffix List. Returns an {\ttfamily Object} with the following properties\+:


\begin{DoxyItemize}
\item {\ttfamily tld}\+: Top level domain (this is the {\itshape public suffix}).
\item {\ttfamily sld}\+: Second level domain (the first private part of the domain name).
\item {\ttfamily domain}\+: The domain name is the {\ttfamily sld} + {\ttfamily tld}.
\item {\ttfamily subdomain}\+: Optional parts left of the domain.
\end{DoxyItemize}

\paragraph*{Example\+:}


\begin{DoxyCode}
var psl = require('psl');

// Parse domain without subdomain
var parsed = psl.parse('google.com');
console.log(parsed.tld); // 'com'
console.log(parsed.sld); // 'google'
console.log(parsed.domain); // 'google.com'
console.log(parsed.subdomain); // null

// Parse domain with subdomain
var parsed = psl.parse('www.google.com');
console.log(parsed.tld); // 'com'
console.log(parsed.sld); // 'google'
console.log(parsed.domain); // 'google.com'
console.log(parsed.subdomain); // 'www'

// Parse domain with nested subdomains
var parsed = psl.parse('a.b.c.d.foo.com');
console.log(parsed.tld); // 'com'
console.log(parsed.sld); // 'foo'
console.log(parsed.domain); // 'foo.com'
console.log(parsed.subdomain); // 'a.b.c.d'
\end{DoxyCode}


\subsubsection*{{\ttfamily psl.\+get(domain)}}

Get domain name, {\ttfamily sld} + {\ttfamily tld}. Returns {\ttfamily null} if not valid.

\paragraph*{Example\+:}


\begin{DoxyCode}
var psl = require('psl');

// null input.
psl.get(null); // null

// Mixed case.
psl.get('COM'); // null
psl.get('example.COM'); // 'example.com'
psl.get('WwW.example.COM'); // 'example.com'

// Unlisted TLD.
psl.get('example'); // null
psl.get('example.example'); // 'example.example'
psl.get('b.example.example'); // 'example.example'
psl.get('a.b.example.example'); // 'example.example'

// TLD with only 1 rule.
psl.get('biz'); // null
psl.get('domain.biz'); // 'domain.biz'
psl.get('b.domain.biz'); // 'domain.biz'
psl.get('a.b.domain.biz'); // 'domain.biz'

// TLD with some 2-level rules.
psl.get('uk.com'); // null);
psl.get('example.uk.com'); // 'example.uk.com');
psl.get('b.example.uk.com'); // 'example.uk.com');

// More complex TLD.
psl.get('c.kobe.jp'); // null
psl.get('b.c.kobe.jp'); // 'b.c.kobe.jp'
psl.get('a.b.c.kobe.jp'); // 'b.c.kobe.jp'
psl.get('city.kobe.jp'); // 'city.kobe.jp'
psl.get('www.city.kobe.jp'); // 'city.kobe.jp'

// IDN labels.
psl.get('食狮.com.cn'); // '食狮.com.cn'
psl.get('食狮.公司.cn'); // '食狮.公司.cn'
psl.get('www.食狮.公司.cn'); // '食狮.公司.cn'

// Same as above, but punycoded.
psl.get('xn--85x722f.com.cn'); // 'xn--85x722f.com.cn'
psl.get('xn--85x722f.xn--55qx5d.cn'); // 'xn--85x722f.xn--55qx5d.cn'
psl.get('www.xn--85x722f.xn--55qx5d.cn'); // 'xn--85x722f.xn--55qx5d.cn'
\end{DoxyCode}


\subsubsection*{{\ttfamily psl.\+is\+Valid(domain)}}

Check whether a domain has a valid Public Suffix. Returns a {\ttfamily Boolean} indicating whether the domain has a valid Public Suffix.

\paragraph*{Example}


\begin{DoxyCode}
var psl = require('psl');

psl.isValid('google.com'); // true
psl.isValid('www.google.com'); // true
psl.isValid('x.yz'); // false
\end{DoxyCode}


\subsection*{Testing and Building}

Test are written using \href{https://mochajs.org/}{\tt {\ttfamily mocha}} and can be run in two different environments\+: {\ttfamily node} and {\ttfamily phantomjs}.


\begin{DoxyCode}
# This will run `eslint`, `mocha` and `karma`.
npm test

# Individual test environments
# Run tests in node only.
./node\_modules/.bin/mocha test
# Run tests in phantomjs only.
./node\_modules/.bin/karma start ./karma.conf.js --single-run

# Build data (parse raw list) and create dist files
npm run build
\end{DoxyCode}


Feel free to fork if you see possible improvements!

\subsection*{Acknowledgements}


\begin{DoxyItemize}
\item Mozilla Foundation\textquotesingle{}s \href{https://publicsuffix.org/}{\tt Public Suffix List}
\item Thanks to Rob Stradling of \href{https://www.comodo.com/}{\tt Comodo} for providing test data.
\item Inspired by \href{https://github.com/weppos/publicsuffix-ruby}{\tt weppos/publicsuffix-\/ruby}
\end{DoxyItemize}

\subsection*{License}

The M\+IT License (M\+IT)

Copyright (c) 2017 Lupo Montero \href{mailto:lupomontero@gmail.com}{\tt lupomontero@gmail.\+com}

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \char`\"{}\+Software\char`\"{}), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions\+:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

T\+HE S\+O\+F\+T\+W\+A\+RE IS P\+R\+O\+V\+I\+D\+ED \char`\"{}\+A\+S I\+S\char`\"{}, W\+I\+T\+H\+O\+UT W\+A\+R\+R\+A\+N\+TY OF A\+NY K\+I\+ND, E\+X\+P\+R\+E\+SS OR I\+M\+P\+L\+I\+ED, I\+N\+C\+L\+U\+D\+I\+NG B\+UT N\+OT L\+I\+M\+I\+T\+ED TO T\+HE W\+A\+R\+R\+A\+N\+T\+I\+ES OF M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY, F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE A\+ND N\+O\+N\+I\+N\+F\+R\+I\+N\+G\+E\+M\+E\+NT. IN NO E\+V\+E\+NT S\+H\+A\+LL T\+HE A\+U\+T\+H\+O\+RS OR C\+O\+P\+Y\+R\+I\+G\+HT H\+O\+L\+D\+E\+RS BE L\+I\+A\+B\+LE F\+OR A\+NY C\+L\+A\+IM, D\+A\+M\+A\+G\+ES OR O\+T\+H\+ER L\+I\+A\+B\+I\+L\+I\+TY, W\+H\+E\+T\+H\+ER IN AN A\+C\+T\+I\+ON OF C\+O\+N\+T\+R\+A\+CT, T\+O\+RT OR O\+T\+H\+E\+R\+W\+I\+SE, A\+R\+I\+S\+I\+NG F\+R\+OM, O\+UT OF OR IN C\+O\+N\+N\+E\+C\+T\+I\+ON W\+I\+TH T\+HE S\+O\+F\+T\+W\+A\+RE OR T\+HE U\+SE OR O\+T\+H\+ER D\+E\+A\+L\+I\+N\+GS IN T\+HE S\+O\+F\+T\+W\+A\+RE. 