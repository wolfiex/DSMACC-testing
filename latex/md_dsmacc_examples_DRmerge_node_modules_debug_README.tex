\href{https://travis-ci.org/visionmedia/debug}{\tt } \href{https://coveralls.io/github/visionmedia/debug?branch=master}{\tt } \href{https://visionmedia-community-slackin.now.sh/}{\tt } \href{#backers}{\tt } \href{#sponsors}{\tt }

A tiny node.\+js debugging utility modelled after node core\textquotesingle{}s debugging technique.

{\bfseries Discussion around the V3 A\+PI is under way \href{https://github.com/visionmedia/debug/issues/370}{\tt here}}

\subsection*{Installation}


\begin{DoxyCode}
$ npm install debug
\end{DoxyCode}


\subsection*{Usage}

{\ttfamily debug} exposes a function; simply pass this function the name of your module, and it will return a decorated version of {\ttfamily console.\+error} for you to pass debug statements to. This will allow you to toggle the debug output for different parts of your module as well as the module as a whole.

Example {\itshape app.\+js}\+:


\begin{DoxyCode}
var debug = require('debug')('http')
  , http = require('http')
  , name = 'My App';

// fake app

debug('booting %s', name);

http.createServer(function(req, res)\{
  debug(req.method + ' ' + req.url);
  res.end('hello\(\backslash\)n');
\}).listen(3000, function()\{
  debug('listening');
\});

// fake worker of some kind

require('./worker');
\end{DoxyCode}


Example {\itshape worker.\+js}\+:


\begin{DoxyCode}
var debug = require('debug')('worker');

setInterval(function()\{
  debug('doing some work');
\}, 1000);
\end{DoxyCode}


The {\bfseries D\+E\+B\+UG} environment variable is then used to enable these based on space or comma-\/delimited names. Here are some examples\+:





\paragraph*{Windows note}

On Windows the environment variable is set using the {\ttfamily set} command.


\begin{DoxyCode}
set DEBUG=*,-not\_this
\end{DoxyCode}


Note that Power\+Shell uses different syntax to set environment variables.


\begin{DoxyCode}
$env:DEBUG = "*,-not\_this"
\end{DoxyCode}


Then, run the program to be debugged as usual.

\subsection*{Millisecond diff}

When actively developing an application it can be useful to see when the time spent between one {\ttfamily debug()} call and the next. Suppose for example you invoke {\ttfamily debug()} before requesting a resource, and after as well, the \char`\"{}+\+N\+N\+Nms\char`\"{} will show you how much time was spent between calls.



When stdout is not a T\+TY, {\ttfamily Date\+::to\+U\+T\+C\+String()} is used, making it more useful for logging the debug information as shown below\+:



\subsection*{Conventions}

If you\textquotesingle{}re using this in one or more of your libraries, you {\itshape should} use the name of your library so that developers may toggle debugging as desired without guessing names. If you have more than one debuggers you {\itshape should} prefix them with your library name and use \char`\"{}\+:\char`\"{} to separate features. For example \char`\"{}body\+Parser\char`\"{} from Connect would then be \char`\"{}connect\+:body\+Parser\char`\"{}.

\subsection*{Wildcards}

The {\ttfamily $\ast$} character may be used as a wildcard. Suppose for example your library has debuggers named \char`\"{}connect\+:body\+Parser\char`\"{}, \char`\"{}connect\+:compress\char`\"{}, \char`\"{}connect\+:session\char`\"{}, instead of listing all three with {\ttfamily D\+E\+B\+UG=connect\+:body\+Parser,connect\+:compress,connect\+:session}, you may simply do {\ttfamily D\+E\+B\+UG=connect\+:$\ast$}, or to run everything using this module simply use {\ttfamily D\+E\+B\+UG=$\ast$}.

You can also exclude specific debuggers by prefixing them with a \char`\"{}-\/\char`\"{} character. For example, {\ttfamily D\+E\+B\+UG=$\ast$,-\/connect\+:$\ast$} would include all debuggers except those starting with \char`\"{}connect\+:\char`\"{}.

\subsection*{Environment Variables}

When running through Node.\+js, you can set a few environment variables that will change the behavior of the debug logging\+:

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Name  }&\textbf{ Purpose   }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Name  }&\textbf{ Purpose   }\\\cline{1-2}
\endhead
{\ttfamily D\+E\+B\+UG}  &Enables/disables specific debugging namespaces.   \\\cline{1-2}
{\ttfamily D\+E\+B\+U\+G\+\_\+\+C\+O\+L\+O\+RS}  &Whether or not to use colors in the debug output.   \\\cline{1-2}
{\ttfamily D\+E\+B\+U\+G\+\_\+\+D\+E\+P\+TH}  &Object inspection depth.   \\\cline{1-2}
{\ttfamily D\+E\+B\+U\+G\+\_\+\+S\+H\+O\+W\+\_\+\+H\+I\+D\+D\+EN}  &Shows hidden properties on inspected objects.   \\\cline{1-2}
\end{longtabu}


{\bfseries Note\+:} The environment variables beginning with {\ttfamily D\+E\+B\+U\+G\+\_\+} end up being converted into an Options object that gets used with {\ttfamily o}/{\ttfamily O} formatters. See the Node.\+js documentation for \href{https://nodejs.org/api/util.html#util_util_inspect_object_options}{\tt {\ttfamily util.\+inspect()}} for the complete list.

\subsection*{Formatters}

Debug uses \href{https://wikipedia.org/wiki/Printf_format_string}{\tt printf-\/style} formatting. Below are the officially supported formatters\+:

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Formatter  }&\textbf{ Representation   }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Formatter  }&\textbf{ Representation   }\\\cline{1-2}
\endhead
{\ttfamily O}  &Pretty-\/print an Object on multiple lines.   \\\cline{1-2}
{\ttfamily o}  &Pretty-\/print an Object all on a single line.   \\\cline{1-2}
{\ttfamily s}  &String.   \\\cline{1-2}
{\ttfamily d}  &Number (both integer and float).   \\\cline{1-2}
{\ttfamily j}  &J\+S\+ON. Replaced with the string \textquotesingle{}\mbox{[}Circular\mbox{]}\textquotesingle{} if the argument contains circular references.   \\\cline{1-2}
{\ttfamily \%\%}  &Single percent sign (\textquotesingle{}\textquotesingle{}). This does not consume an argument.   \\\cline{1-2}
\end{longtabu}


\subsubsection*{Custom formatters}

You can add custom formatters by extending the {\ttfamily debug.\+formatters} object. For example, if you wanted to add support for rendering a Buffer as hex with {\ttfamily h}, you could do something like\+:


\begin{DoxyCode}
const createDebug = require('debug')
createDebug.formatters.h = (v) => \{
  return v.toString('hex')
\}

// â€¦elsewhere
const debug = createDebug('foo')
debug('this is hex: %h', new Buffer('hello world'))
//   foo this is hex: 68656c6c6f20776f726c6421 +0ms
\end{DoxyCode}


\subsection*{Browser support}

You can build a browser-\/ready script using \href{https://github.com/substack/node-browserify}{\tt browserify}, or just use the \href{https://wzrd.in/}{\tt browserify-\/as-\/a-\/service} \href{https://wzrd.in/standalone/debug@latest}{\tt build}, if you don\textquotesingle{}t want to build it yourself.

Debug\textquotesingle{}s enable state is currently persisted by {\ttfamily local\+Storage}. Consider the situation shown below where you have {\ttfamily worker\+:a} and {\ttfamily worker\+:b}, and wish to debug both. You can enable this using {\ttfamily local\+Storage.\+debug}\+:


\begin{DoxyCode}
localStorage.debug = 'worker:*'
\end{DoxyCode}


And then refresh the page.


\begin{DoxyCode}
a = debug('worker:a');
b = debug('worker:b');

setInterval(function()\{
  a('doing some work');
\}, 1000);

setInterval(function()\{
  b('doing some work');
\}, 1200);
\end{DoxyCode}


\paragraph*{Web Inspector Colors}

Colors are also enabled on \char`\"{}\+Web Inspectors\char`\"{} that understand the {\ttfamily c} formatting option. These are Web\+Kit web inspectors, Firefox (\href{https://hacks.mozilla.org/2014/05/editable-box-model-multiple-selection-sublime-text-keys-much-more-firefox-developer-tools-episode-31/}{\tt since version 31}) and the Firebug plugin for Firefox (any version).

Colored output looks something like\+:



\subsection*{Output streams}

By default {\ttfamily debug} will log to stderr, however this can be configured per-\/namespace by overriding the {\ttfamily log} method\+:

Example {\itshape stdout.\+js}\+:


\begin{DoxyCode}
var debug = require('debug');
var error = debug('app:error');

// by default stderr is used
error('goes to stderr!');

var log = debug('app:log');
// set this namespace to log via console.log
log.log = console.log.bind(console); // don't forget to bind to console!
log('goes to stdout');
error('still goes to stderr!');

// set all output to go via console.info
// overrides all per-namespace log settings
debug.log = console.info.bind(console);
error('now goes to stdout via console.info');
log('still goes to stdout, but via console.info now');
\end{DoxyCode}


\subsection*{Authors}


\begin{DoxyItemize}
\item TJ Holowaychuk
\item Nathan Rajlich
\item Andrew Rhyne
\end{DoxyItemize}

\subsection*{Backers}

Support us with a monthly donation and help us continue our activities. \mbox{[}\href{https://opencollective.com/debug#backer}{\tt Become a backer}\mbox{]}

\href{https://opencollective.com/debug/backer/0/website}{\tt } \href{https://opencollective.com/debug/backer/1/website}{\tt } \href{https://opencollective.com/debug/backer/2/website}{\tt } \href{https://opencollective.com/debug/backer/3/website}{\tt } \href{https://opencollective.com/debug/backer/4/website}{\tt } \href{https://opencollective.com/debug/backer/5/website}{\tt } \href{https://opencollective.com/debug/backer/6/website}{\tt } \href{https://opencollective.com/debug/backer/7/website}{\tt } \href{https://opencollective.com/debug/backer/8/website}{\tt } \href{https://opencollective.com/debug/backer/9/website}{\tt } \href{https://opencollective.com/debug/backer/10/website}{\tt } \href{https://opencollective.com/debug/backer/11/website}{\tt } \href{https://opencollective.com/debug/backer/12/website}{\tt } \href{https://opencollective.com/debug/backer/13/website}{\tt } \href{https://opencollective.com/debug/backer/14/website}{\tt } \href{https://opencollective.com/debug/backer/15/website}{\tt } \href{https://opencollective.com/debug/backer/16/website}{\tt } \href{https://opencollective.com/debug/backer/17/website}{\tt } \href{https://opencollective.com/debug/backer/18/website}{\tt } \href{https://opencollective.com/debug/backer/19/website}{\tt } \href{https://opencollective.com/debug/backer/20/website}{\tt } \href{https://opencollective.com/debug/backer/21/website}{\tt } \href{https://opencollective.com/debug/backer/22/website}{\tt } \href{https://opencollective.com/debug/backer/23/website}{\tt } \href{https://opencollective.com/debug/backer/24/website}{\tt } \href{https://opencollective.com/debug/backer/25/website}{\tt } \href{https://opencollective.com/debug/backer/26/website}{\tt } \href{https://opencollective.com/debug/backer/27/website}{\tt } \href{https://opencollective.com/debug/backer/28/website}{\tt } \href{https://opencollective.com/debug/backer/29/website}{\tt }

\subsection*{Sponsors}

Become a sponsor and get your logo on our R\+E\+A\+D\+ME on Github with a link to your site. \mbox{[}\href{https://opencollective.com/debug#sponsor}{\tt Become a sponsor}\mbox{]}

\href{https://opencollective.com/debug/sponsor/0/website}{\tt } \href{https://opencollective.com/debug/sponsor/1/website}{\tt } \href{https://opencollective.com/debug/sponsor/2/website}{\tt } \href{https://opencollective.com/debug/sponsor/3/website}{\tt } \href{https://opencollective.com/debug/sponsor/4/website}{\tt } \href{https://opencollective.com/debug/sponsor/5/website}{\tt } \href{https://opencollective.com/debug/sponsor/6/website}{\tt } \href{https://opencollective.com/debug/sponsor/7/website}{\tt } \href{https://opencollective.com/debug/sponsor/8/website}{\tt } \href{https://opencollective.com/debug/sponsor/9/website}{\tt } \href{https://opencollective.com/debug/sponsor/10/website}{\tt } \href{https://opencollective.com/debug/sponsor/11/website}{\tt } \href{https://opencollective.com/debug/sponsor/12/website}{\tt } \href{https://opencollective.com/debug/sponsor/13/website}{\tt } \href{https://opencollective.com/debug/sponsor/14/website}{\tt } \href{https://opencollective.com/debug/sponsor/15/website}{\tt } \href{https://opencollective.com/debug/sponsor/16/website}{\tt } \href{https://opencollective.com/debug/sponsor/17/website}{\tt } \href{https://opencollective.com/debug/sponsor/18/website}{\tt } \href{https://opencollective.com/debug/sponsor/19/website}{\tt } \href{https://opencollective.com/debug/sponsor/20/website}{\tt } \href{https://opencollective.com/debug/sponsor/21/website}{\tt } \href{https://opencollective.com/debug/sponsor/22/website}{\tt } \href{https://opencollective.com/debug/sponsor/23/website}{\tt } \href{https://opencollective.com/debug/sponsor/24/website}{\tt } \href{https://opencollective.com/debug/sponsor/25/website}{\tt } \href{https://opencollective.com/debug/sponsor/26/website}{\tt } \href{https://opencollective.com/debug/sponsor/27/website}{\tt } \href{https://opencollective.com/debug/sponsor/28/website}{\tt } \href{https://opencollective.com/debug/sponsor/29/website}{\tt }

\subsection*{License}

(The M\+IT License)

Copyright (c) 2014-\/2016 TJ Holowaychuk $<$\href{mailto:tj@vision-media.ca}{\tt tj@vision-\/media.\+ca}$>$

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \textquotesingle{}Software\textquotesingle{}), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions\+:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

T\+HE S\+O\+F\+T\+W\+A\+RE IS P\+R\+O\+V\+I\+D\+ED \textquotesingle{}AS IS\textquotesingle{}, W\+I\+T\+H\+O\+UT W\+A\+R\+R\+A\+N\+TY OF A\+NY K\+I\+ND, E\+X\+P\+R\+E\+SS OR I\+M\+P\+L\+I\+ED, I\+N\+C\+L\+U\+D\+I\+NG B\+UT N\+OT L\+I\+M\+I\+T\+ED TO T\+HE W\+A\+R\+R\+A\+N\+T\+I\+ES OF M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY, F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE A\+ND N\+O\+N\+I\+N\+F\+R\+I\+N\+G\+E\+M\+E\+NT. IN NO E\+V\+E\+NT S\+H\+A\+LL T\+HE A\+U\+T\+H\+O\+RS OR C\+O\+P\+Y\+R\+I\+G\+HT H\+O\+L\+D\+E\+RS BE L\+I\+A\+B\+LE F\+OR A\+NY C\+L\+A\+IM, D\+A\+M\+A\+G\+ES OR O\+T\+H\+ER L\+I\+A\+B\+I\+L\+I\+TY, W\+H\+E\+T\+H\+ER IN AN A\+C\+T\+I\+ON OF C\+O\+N\+T\+R\+A\+CT, T\+O\+RT OR O\+T\+H\+E\+R\+W\+I\+SE, A\+R\+I\+S\+I\+NG F\+R\+OM, O\+UT OF OR IN C\+O\+N\+N\+E\+C\+T\+I\+ON W\+I\+TH T\+HE S\+O\+F\+T\+W\+A\+RE OR T\+HE U\+SE OR O\+T\+H\+ER D\+E\+A\+L\+I\+N\+GS IN T\+HE S\+O\+F\+T\+W\+A\+RE. 