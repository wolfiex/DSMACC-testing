\hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D}{}\section{dsmacc.\+graph.\+S\+T\+P\+R.\+Sparse3D Class Reference}
\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D}\index{dsmacc.\+graph.\+S\+T\+P\+R.\+Sparse3D@{dsmacc.\+graph.\+S\+T\+P\+R.\+Sparse3D}}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a9406cf189689ec26cbb75194384b12c8}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a9406cf189689ec26cbb75194384b12c8}} 
def {\bfseries \+\_\+\+\_\+init\+\_\+\+\_\+} (self, adjacency\+\_\+matrix=None, names=None, onnone=0)
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_aae48ed1240e8ead19cd54ad7b3d9c2b9}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_aae48ed1240e8ead19cd54ad7b3d9c2b9}} 
def {\bfseries add} (self, source, target, values)
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a0d37abdccbeaa010dcfc5906144fbf89}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a0d37abdccbeaa010dcfc5906144fbf89}} 
def {\bfseries read} (self, source, target)
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a1d3d63de1433c90e5d388de7b6e898a7}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a1d3d63de1433c90e5d388de7b6e898a7}} 
def {\bfseries reverse} (self)
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_adf344ccb45dbb3f75257db7dd9779ecb}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_adf344ccb45dbb3f75257db7dd9779ecb}} 
def {\bfseries get\+\_\+rowkeys} (self, fn=\textquotesingle{}csc\+\_\+keys\textquotesingle{})
\item 
def \mbox{\hyperlink{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_ac87c5e48b0a4b67709a9249423398660}{get\+\_\+colkeys}} (self, fn=\textquotesingle{}csc\+\_\+keys\textquotesingle{})
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_ad2a3ee6ba6c7a650c98100dbc1e4a19f}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_ad2a3ee6ba6c7a650c98100dbc1e4a19f}} 
def {\bfseries log10normalise} (self, minlink=0.\+001, zeronans=False)
\item 
def \mbox{\hyperlink{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_aa74d5a620b2d4e87d20c8355f46bde67}{to\+\_\+numpy\+\_\+matrix}} (self, elementnumber=0, parray=None)
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a9025f20ab586b70e96f1f993d8b6c516}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a9025f20ab586b70e96f1f993d8b6c516}} 
def {\bfseries csc\+\_\+keys} (self)
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_ab9550908600c645a9bb5917ebf977bd1}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_ab9550908600c645a9bb5917ebf977bd1}} 
def {\bfseries csr\+\_\+keys} (self)
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_aff7959656875ba0d21c3558429f89278}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_aff7959656875ba0d21c3558429f89278}} 
def {\bfseries keys} (self)
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a15e1e621cb7ba85161e2bdcc694fefc8}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a15e1e621cb7ba85161e2bdcc694fefc8}} 
def {\bfseries init\+\_\+pr} (self)
\item 
def \mbox{\hyperlink{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a14328eb65ee83cc72f0b22b85100818d}{googley}} (self, timestep=0, alpha=0.\+85, parray=None, personalization=None, nodelist=None, dangling=None)
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a14424ed2b5bda571feeeaa0fb0364cb6}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a14424ed2b5bda571feeeaa0fb0364cb6}} 
def {\bfseries pr} (self, timestep=0, alpha=0.\+85, parray=None, personalization=None)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a69b759f2bfb90891898f3a42741b0190}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a69b759f2bfb90891898f3a42741b0190}} 
{\bfseries onnone}
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_abc0cbe697a988fce9ce42c04cbf615fa}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_abc0cbe697a988fce9ce42c04cbf615fa}} 
{\bfseries data}
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a14d035db37ee89590690ce0ba04e1853}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a14d035db37ee89590690ce0ba04e1853}} 
{\bfseries rowkeys}
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a87596173f0bf27d72f124af0e7b60488}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a87596173f0bf27d72f124af0e7b60488}} 
{\bfseries colkeys}
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a056abb1a0463df708e3087bd70f94391}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a056abb1a0463df708e3087bd70f94391}} 
{\bfseries number\+\_\+timesteps}
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_ae9c00e135e6bb147958deabb84280f55}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_ae9c00e135e6bb147958deabb84280f55}} 
{\bfseries rsum}
\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a6f18a03dc128756c337bb50b2fa752c9}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a6f18a03dc128756c337bb50b2fa752c9}} 
dictionary {\bfseries data} = \{\}
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a2225c4c513264d7642f46a81e0221de3}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a2225c4c513264d7642f46a81e0221de3}} 
{\bfseries names} = None
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a5b2afcaf087e5b86b8d02afa40164a9e}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a5b2afcaf087e5b86b8d02afa40164a9e}} 
list {\bfseries log10log} = \mbox{[}False,False\mbox{]}
\item 
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_aeee89db18d1dc8e3a17e5117d9a12e6f}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_aeee89db18d1dc8e3a17e5117d9a12e6f}} 
int {\bfseries reversed} = 0
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}A 3 Dimentional sparse matrix represenatation.

Autoinput:
    adjacency - n x n matrix of value items (items can be anything)
    names - list of names (e.g. G.nodes())

onnone:
    value or object to return when a non-existant link is summoned.
\end{DoxyVerb}
 

\subsection{Member Function Documentation}
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_ac87c5e48b0a4b67709a9249423398660}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_ac87c5e48b0a4b67709a9249423398660}} 
\index{dsmacc\+::graph\+::\+S\+T\+P\+R\+::\+Sparse3D@{dsmacc\+::graph\+::\+S\+T\+P\+R\+::\+Sparse3D}!get\+\_\+colkeys@{get\+\_\+colkeys}}
\index{get\+\_\+colkeys@{get\+\_\+colkeys}!dsmacc\+::graph\+::\+S\+T\+P\+R\+::\+Sparse3D@{dsmacc\+::graph\+::\+S\+T\+P\+R\+::\+Sparse3D}}
\subsubsection{\texorpdfstring{get\+\_\+colkeys()}{get\_colkeys()}}
{\footnotesize\ttfamily def dsmacc.\+graph.\+S\+T\+P\+R.\+Sparse3\+D.\+get\+\_\+colkeys (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{fn = {\ttfamily \textquotesingle{}csc\+\_\+keys\textquotesingle{}} }\end{DoxyParamCaption})}

\begin{DoxyVerb}goes into keys
fn [keys, csc_keys, csc_keys]
\end{DoxyVerb}
 
\begin{DoxyCode}
59       \textcolor{keyword}{def }get\_colkeys (self, fn = 'csc\_keys'):
60           \textcolor{stringliteral}{'''}
61 \textcolor{stringliteral}{          goes into keys}
62 \textcolor{stringliteral}{          fn [keys, csc\_keys, csc\_keys]}
63 \textcolor{stringliteral}{          '''}
64           fn = getattr(self,fn)
65           self.colkeys = [filter(\textcolor{keyword}{lambda} x: x[1] \textcolor{keywordflow}{is} i, fn()) \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(self.names))]
66       
67       
\end{DoxyCode}
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a14328eb65ee83cc72f0b22b85100818d}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_a14328eb65ee83cc72f0b22b85100818d}} 
\index{dsmacc\+::graph\+::\+S\+T\+P\+R\+::\+Sparse3D@{dsmacc\+::graph\+::\+S\+T\+P\+R\+::\+Sparse3D}!googley@{googley}}
\index{googley@{googley}!dsmacc\+::graph\+::\+S\+T\+P\+R\+::\+Sparse3D@{dsmacc\+::graph\+::\+S\+T\+P\+R\+::\+Sparse3D}}
\subsubsection{\texorpdfstring{googley()}{googley()}}
{\footnotesize\ttfamily def dsmacc.\+graph.\+S\+T\+P\+R.\+Sparse3\+D.\+googley (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{timestep = {\ttfamily 0},  }\item[{}]{alpha = {\ttfamily 0.85},  }\item[{}]{parray = {\ttfamily None},  }\item[{}]{personalization = {\ttfamily None},  }\item[{}]{nodelist = {\ttfamily None},  }\item[{}]{dangling = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Create a google_matrix for our data. See networkx documentation for more information. 
  Inputs: 
    alpha - damping factor (float)
    timestep - [weight array index or 'teleport' or a random selection] (number|str)
    parray - probability array for time selection if using 'teleport' (list)
    personalisation - optional node weightings corresponding to importance (dict)\end{DoxyVerb}
 
\begin{DoxyCode}
148       \textcolor{keyword}{def }googley (self, timestep = 0 , alpha = 0.85, parray = None , personalization = None, 
      nodelist=None, dangling=None):
149             \textcolor{stringliteral}{''' }
150 \textcolor{stringliteral}{            Create a google\_matrix for our data. See networkx documentation for more information. }
151 \textcolor{stringliteral}{              Inputs: }
152 \textcolor{stringliteral}{                alpha - damping factor (float)}
153 \textcolor{stringliteral}{                timestep - [weight array index or 'teleport' or a random selection] (number|str)}
154 \textcolor{stringliteral}{                parray - probability array for time selection if using 'teleport' (list)}
155 \textcolor{stringliteral}{                personalisation - optional node weightings corresponding to importance (dict)}
156 \textcolor{stringliteral}{                '''}
157             \textcolor{keywordflow}{try}: self.number\_timesteps
158             \textcolor{keywordflow}{except}: self.number\_timesteps = len(self.data.values()[0])
159                
160             n = len(self.names)
161             \textcolor{keywordflow}{if} personalization \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:  p = np.repeat(1.0 / float(n), n)
162             
163             \textcolor{keywordflow}{else}:
164                   p = np.array([personalization.get(n, 0) \textcolor{keywordflow}{for} n \textcolor{keywordflow}{in} self.names], dtype=float)
165                   p /= p.sum()
166             
167             M = self.to\_numpy\_matrix(elementnumber=timestep,parray=parray)[0]
168             \textcolor{comment}{# Assign dangling\_weights to any dangling nodes (nodes with no out links)}
169             \textcolor{comment}{# Dangling nodes}
170             \textcolor{keywordflow}{if} dangling \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
171                 dangling\_weights = p
172             \textcolor{keywordflow}{else}:
173                 \textcolor{comment}{# Convert the dangling dictionary into an array in nodelist order}
174                 dangling\_weights = np.array([dangling.get(n, 0) \textcolor{keywordflow}{for} n \textcolor{keywordflow}{in} nodelist],
175                                             dtype=float)
176                 dangling\_weights /= dangling\_weights.sum()
177             dangling\_nodes = np.where(M.sum(axis=1) == 0)[0]
178 
179             \textcolor{comment}{# Assign dangling\_weights to any dangling nodes (nodes with no out links)}
180             \textcolor{keywordflow}{for} node \textcolor{keywordflow}{in} dangling\_nodes:
181                 M[node] = dangling\_weights
182                 
183             \textcolor{keywordflow}{return} M*alpha + (1 - alpha) * p
184 
\end{DoxyCode}
\mbox{\Hypertarget{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_aa74d5a620b2d4e87d20c8355f46bde67}\label{classdsmacc_1_1graph_1_1STPR_1_1Sparse3D_aa74d5a620b2d4e87d20c8355f46bde67}} 
\index{dsmacc\+::graph\+::\+S\+T\+P\+R\+::\+Sparse3D@{dsmacc\+::graph\+::\+S\+T\+P\+R\+::\+Sparse3D}!to\+\_\+numpy\+\_\+matrix@{to\+\_\+numpy\+\_\+matrix}}
\index{to\+\_\+numpy\+\_\+matrix@{to\+\_\+numpy\+\_\+matrix}!dsmacc\+::graph\+::\+S\+T\+P\+R\+::\+Sparse3D@{dsmacc\+::graph\+::\+S\+T\+P\+R\+::\+Sparse3D}}
\subsubsection{\texorpdfstring{to\+\_\+numpy\+\_\+matrix()}{to\_numpy\_matrix()}}
{\footnotesize\ttfamily def dsmacc.\+graph.\+S\+T\+P\+R.\+Sparse3\+D.\+to\+\_\+numpy\+\_\+matrix (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{elementnumber = {\ttfamily 0},  }\item[{}]{parray = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Function to return an adjacency matrix for a certain timestep 
Inputs:
    elementnumber [numerical index or 'teleport']
    parray - if teleporting we can specify a probability array for picking each timestep (more important times)
    
Returns: 
   list (matrix, node names, elementnumber)
\end{DoxyVerb}
 
\begin{DoxyCode}
93       \textcolor{keyword}{def }to\_numpy\_matrix(self,elementnumber=0, parray = None): 
94           \textcolor{stringliteral}{''' }
95 \textcolor{stringliteral}{          Function to return an adjacency matrix for a certain timestep }
96 \textcolor{stringliteral}{          Inputs:}
97 \textcolor{stringliteral}{              elementnumber [numerical index or 'teleport']}
98 \textcolor{stringliteral}{              parray - if teleporting we can specify a probability array for picking each timestep (more
       important times)}
99 \textcolor{stringliteral}{              }
100 \textcolor{stringliteral}{          Returns: }
101 \textcolor{stringliteral}{             list (matrix, node names, elementnumber)}
102 \textcolor{stringliteral}{          '''}
103           n = len(self.names)
104           rt = np.zeros((n,n))
105           
106           \textcolor{keywordflow}{if} elementnumber == \textcolor{stringliteral}{'teleport'}:
107                 \textcolor{keywordflow}{try}: self.number\_timesteps
108                 \textcolor{keywordflow}{except}: self.number\_timesteps = len(self.data.values()[0])
109                 tsrange = range(self.number\_timesteps)
110                         
111           \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} self.data:
112               \textcolor{keywordflow}{if} elementnumber == \textcolor{stringliteral}{'teleport'}:
113                   \textcolor{comment}{#select a new teleportation link at random. }
114                   elementnumber = np.random.choice(tsrange, replace=\textcolor{keyword}{False}, p=parray)
115               rt[i[0],i[1]] = self.data[i][elementnumber]
116               
117           \textcolor{keywordflow}{return} (rt,self.names,elementnumber)
118             
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
dsmacc/graph/\+S\+T\+P\+R/\+\_\+\+\_\+init\+\_\+\+\_\+.\+py\end{DoxyCompactItemize}
