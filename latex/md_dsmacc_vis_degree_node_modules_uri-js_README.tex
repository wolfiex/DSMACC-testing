U\+R\+I.\+js is an \href{http://www.ietf.org/rfc/rfc3986.txt}{\tt R\+FC 3986} compliant, scheme extendable U\+RI parsing/validating/resolving library for all Java\+Script environments (browsers, Node.\+js, etc). It is also compliant with the I\+RI (\href{http://www.ietf.org/rfc/rfc3987.txt}{\tt R\+FC 3987}), I\+D\+NA (\href{http://www.ietf.org/rfc/rfc5890.txt}{\tt R\+FC 5890}), I\+Pv6 Address (\href{http://www.ietf.org/rfc/rfc5952.txt}{\tt R\+FC 5952}), I\+Pv6 Zone Identifier (\href{http://www.ietf.org/rfc/rfc6874.txt}{\tt R\+FC 6874}) specifications.

U\+R\+I.\+js has an extensive test suite, and works in all (Node.\+js, web) environments. It weighs in at 6.\+2kb (gzipped, 16kb deflated).

\subsection*{A\+PI}

\subsubsection*{Parsing}

\begin{DoxyVerb}URI.parse("uri://user:pass@example.com:123/one/two.three?q1=a1&q2=a2#body");
//returns:
//{
//  scheme : "uri",
//  userinfo : "user:pass",
//  host : "example.com",
//  port : 123,
//  path : "/one/two.three",
//  query : "q1=a1&q2=a2",
//  fragment : "body"
//}
\end{DoxyVerb}


\subsubsection*{Serializing}

\begin{DoxyVerb}URI.serialize({scheme : "http", host : "example.com", fragment : "footer"}) === "http://example.com/#footer"
\end{DoxyVerb}


\subsubsection*{Resolving}

\begin{DoxyVerb}URI.resolve("uri://a/b/c/d?q", "../../g") === "uri://a/g"
\end{DoxyVerb}


\subsubsection*{Normalizing}

\begin{DoxyVerb}URI.normalize("HTTP://ABC.com:80/%7Esmith/home.html") === "http://abc.com/~smith/home.html"
\end{DoxyVerb}


\subsubsection*{Comparison}

\begin{DoxyVerb}URI.equal("example://a/b/c/%7Bfoo%7D", "eXAMPLE://a/./b/../b/%63/%7bfoo%7d") === true
\end{DoxyVerb}


\subsubsection*{IP Support}

\begin{DoxyVerb}//IPv4 normalization
URI.normalize("//192.068.001.000") === "//192.68.1.0"

//IPv6 normalization
URI.normalize("//[2001:0:0DB8::0:0001]") === "//[2001:0:db8::1]"

//IPv6 zone identifier support
URI.parse("//[2001:db8::7%25en1]");
//returns:
//{
//  host : "2001:db8::7%en1"
//}
\end{DoxyVerb}


\subsubsection*{I\+RI Support}

\begin{DoxyVerb}//convert IRI to URI
URI.serialize(URI.parse("http://examplé.org/rosé")) === "http://xn--exampl-gva.org/ros%C3%A9"
//convert URI to IRI
URI.serialize(URI.parse("http://xn--exampl-gva.org/ros%C3%A9"), {iri:true}) === "http://examplé.org/rosé"
\end{DoxyVerb}


\subsubsection*{Options}

All of the above functions can accept an additional options argument that is an object that can contain one or more of the following properties\+:


\begin{DoxyItemize}
\item {\ttfamily scheme} (string)

Indicates the scheme that the U\+RI should be treated as, overriding the U\+RI\textquotesingle{}s normal scheme parsing behavior.
\item {\ttfamily reference} (string)

If set to {\ttfamily \char`\"{}suffix\char`\"{}}, it indicates that the U\+RI is in the suffix format, and the validator will use the option\textquotesingle{}s {\ttfamily scheme} property to determine the U\+RI\textquotesingle{}s scheme.
\item {\ttfamily tolerant} (boolean, false)

If set to {\ttfamily true}, the parser will relax U\+RI resolving rules.
\item {\ttfamily absolute\+Path} (boolean, false)

If set to {\ttfamily true}, the serializer will not resolve a relative {\ttfamily path} component.
\item {\ttfamily iri} (boolean, false)

If set to {\ttfamily true}, the serializer will unescape non-\/\+A\+S\+C\+II characters as per \href{http://www.ietf.org/rfc/rfc3987.txt}{\tt R\+FC 3987}.
\item {\ttfamily unicode\+Support} (boolean, false)

If set to {\ttfamily true}, the parser will unescape non-\/\+A\+S\+C\+II characters in the parsed output as per \href{http://www.ietf.org/rfc/rfc3987.txt}{\tt R\+FC 3987}.
\item {\ttfamily domain\+Host} (boolean, false)

If set to {\ttfamily true}, the library will treat the {\ttfamily host} component as a domain name, and convert I\+D\+Ns (International Domain Names) as per \href{http://www.ietf.org/rfc/rfc5891.txt}{\tt R\+FC 5891}.
\end{DoxyItemize}

\subsection*{Scheme Extendable}

U\+R\+I.\+js supports inserting custom \href{http://en.wikipedia.org/wiki/URI_scheme}{\tt scheme} dependent processing rules. Currently, U\+R\+I.\+js has built in support for the following schemes\+:


\begin{DoxyItemize}
\item http \mbox{[}\href{http://www.ietf.org/rfc/rfc2616.txt}{\tt R\+FC 2616}\mbox{]}
\item https \mbox{[}\href{http://www.ietf.org/rfc/rfc2818.txt}{\tt R\+FC 2818}\mbox{]}
\item mailto \mbox{[}\href{http://www.ietf.org/rfc/rfc6068.txt}{\tt R\+FC 6068}\mbox{]}
\item urn \mbox{[}\href{http://www.ietf.org/rfc/rfc2141.txt}{\tt R\+FC 2141}\mbox{]}
\item urn\+:uuid \mbox{[}\href{http://www.ietf.org/rfc/rfc4122.txt}{\tt R\+FC 4122}\mbox{]}
\end{DoxyItemize}

\subsubsection*{H\+T\+TP Support}

\begin{DoxyVerb}URI.equal("HTTP://ABC.COM:80", "http://abc.com/") === true
\end{DoxyVerb}


\subsubsection*{Mailto Support}

\begin{DoxyVerb}URI.parse("mailto:alpha@example.com,bravo@example.com?subject=SUBSCRIBE&body=Sign%20me%20up!");
//returns:
//{
//  scheme : "mailto",
//  to : ["alpha@example.com", "bravo@example.com"],
//  subject : "SUBSCRIBE",
//  body : "Sign me up!"
//}

URI.serialize({
    scheme : "mailto",
    to : ["alpha@example.com"],
    subject : "REMOVE",
    body : "Please remove me",
    headers : {
        cc : "charlie@example.com"
    }
}) === "mailto:alpha@example.com?cc=charlie@example.com&subject=REMOVE&body=Please%20remove%20me"
\end{DoxyVerb}


\subsubsection*{U\+RN Support}

\begin{DoxyVerb}URI.parse("urn:example:foo");
//returns:
//{
//  scheme : "urn",
//  nid : "example",
//  nss : "foo",
//}
\end{DoxyVerb}


\paragraph*{U\+RN U\+U\+ID Support}

\begin{DoxyVerb}URI.parse("urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6");
//returns:
//{
//  scheme : "urn",
//  nid : "example",
//  uuid : "f81d4fae-7dec-11d0-a765-00a0c91e6bf6",
//}
\end{DoxyVerb}


\subsection*{Usage}

To load in a browser, use the following tag\+: \begin{DoxyVerb}<script type="text/javascript" src="uri-js/dist/es5/uri.all.min.js"></script>
\end{DoxyVerb}


To load in a Common\+JS (Node.\+js) environment, first install with npm by running on the command line\+: \begin{DoxyVerb}npm install uri-js
\end{DoxyVerb}


Then, in your code, load it using\+: \begin{DoxyVerb}const URI = require("uri-js");
\end{DoxyVerb}


If you are writing your code in E\+S6+ (E\+S\+N\+E\+XT) or Type\+Script, you would load it using\+: \begin{DoxyVerb}import * as URI from "uri-js";
\end{DoxyVerb}


Or you can load just what you need using named exports\+: \begin{DoxyVerb}import { parse, serialize, resolve, resolveComponents, normalize, equal, removeDotSegments, pctEncChar, pctDecChars, escapeComponent, unescapeComponent } from "uri-js";
\end{DoxyVerb}


\subsection*{Breaking changes}

\subsubsection*{Breaking changes from 3.\+x}

U\+RN parsing has been completely changed to better align with the specification. Scheme is now always {\ttfamily urn}, but has two new properties\+: {\ttfamily nid} which contains the Namspace Identifier, and {\ttfamily nss} which contains the Namespace Specific String. The {\ttfamily nss} property will be removed by higher order scheme handlers, such as the U\+U\+ID U\+RN scheme handler.

The U\+U\+ID of a U\+RN can now be found in the {\ttfamily uuid} property.

\subsubsection*{Breaking changes from 2.\+x}

U\+RI validation has been removed as it was slow, exposed a vulnerabilty, and was generally not useful.

\subsubsection*{Breaking changes from 1.\+x}

The {\ttfamily errors} array on parsed components is now an {\ttfamily error} string.

\subsection*{License (\href{http://en.wikipedia.org/wiki/BSD_licenses#2-clause}{\tt Simplified B\+SD})}

Copyright 2011 Gary Court. All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met\+:


\begin{DoxyEnumerate}
\item Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
\item Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
\end{DoxyEnumerate}

T\+H\+IS S\+O\+F\+T\+W\+A\+RE IS P\+R\+O\+V\+I\+D\+ED BY G\+A\+RY C\+O\+U\+RT \char`\"{}\+A\+S I\+S\char`\"{} A\+ND A\+NY E\+X\+P\+R\+E\+SS OR I\+M\+P\+L\+I\+ED W\+A\+R\+R\+A\+N\+T\+I\+ES, I\+N\+C\+L\+U\+D\+I\+NG, B\+UT N\+OT L\+I\+M\+I\+T\+ED TO, T\+HE I\+M\+P\+L\+I\+ED W\+A\+R\+R\+A\+N\+T\+I\+ES OF M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY A\+ND F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE A\+RE D\+I\+S\+C\+L\+A\+I\+M\+ED. IN NO E\+V\+E\+NT S\+H\+A\+LL G\+A\+RY C\+O\+U\+RT OR C\+O\+N\+T\+R\+I\+B\+U\+T\+O\+RS BE L\+I\+A\+B\+LE F\+OR A\+NY D\+I\+R\+E\+CT, I\+N\+D\+I\+R\+E\+CT, I\+N\+C\+I\+D\+E\+N\+T\+AL, S\+P\+E\+C\+I\+AL, E\+X\+E\+M\+P\+L\+A\+RY, OR C\+O\+N\+S\+E\+Q\+U\+E\+N\+T\+I\+AL D\+A\+M\+A\+G\+ES (I\+N\+C\+L\+U\+D\+I\+NG, B\+UT N\+OT L\+I\+M\+I\+T\+ED TO, P\+R\+O\+C\+U\+R\+E\+M\+E\+NT OF S\+U\+B\+S\+T\+I\+T\+U\+TE G\+O\+O\+DS OR S\+E\+R\+V\+I\+C\+ES; L\+O\+SS OF U\+SE, D\+A\+TA, OR P\+R\+O\+F\+I\+TS; OR B\+U\+S\+I\+N\+E\+SS I\+N\+T\+E\+R\+R\+U\+P\+T\+I\+ON) H\+O\+W\+E\+V\+ER C\+A\+U\+S\+ED A\+ND ON A\+NY T\+H\+E\+O\+RY OF L\+I\+A\+B\+I\+L\+I\+TY, W\+H\+E\+T\+H\+ER IN C\+O\+N\+T\+R\+A\+CT, S\+T\+R\+I\+CT L\+I\+A\+B\+I\+L\+I\+TY, OR T\+O\+RT (I\+N\+C\+L\+U\+D\+I\+NG N\+E\+G\+L\+I\+G\+E\+N\+CE OR O\+T\+H\+E\+R\+W\+I\+SE) A\+R\+I\+S\+I\+NG IN A\+NY W\+AY O\+UT OF T\+HE U\+SE OF T\+H\+IS S\+O\+F\+T\+W\+A\+RE, E\+V\+EN IF A\+D\+V\+I\+S\+ED OF T\+HE P\+O\+S\+S\+I\+B\+I\+L\+I\+TY OF S\+U\+CH D\+A\+M\+A\+GE.

The views and conclusions contained in the software and documentation are those of the authors and should not be interpreted as representing official policies, either expressed or implied, of Gary Court. 